(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{276:function(e,t,a){e.exports=a(483)},482:function(e,t,a){},483:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),l=a(44),i=a.n(l),o=a(10),s=a(40),u=a(25),m=a(239),d=a(4),p=a.n(d),f=a(8),E=a(501),b=a(69),v=a(128),h=a(12),y=a(23),g=a.n(y),w="/kauppalappu/api",O=null,j=function(){return{headers:{Authorization:O}}},C=function(){var e=Object(f.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("".concat(w,"/lists"),j());case 2:return t=e.sent,a=t.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(f.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("".concat(w,"/lists"),{name:t},j());case 2:return a=e.sent,n=a.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(f.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.put("".concat(w,"/lists/").concat(t,"/update"),{items:a},j());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),S=function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.delete("".concat(w,"/lists/").concat(t),j());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(f.a)(p.a.mark((function e(t,a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("".concat(w,"/lists/").concat(t,"/add-item"),{name:a},j());case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),T=function(){var e=Object(f.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.delete("".concat(w,"/lists/").concat(t,"/delete-item/").concat(a),j());case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),L=function(){var e=Object(f.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.patch("".concat(w,"/lists/").concat(t,"/edit-item"),{item:a},j());case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),A=function(){var e=Object(f.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.patch("".concat(w,"/lists/").concat(t,"/mark-item"),{item:a},j());case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),_=function(){var e=Object(f.a)(p.a.mark((function e(t,a){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("".concat(w,"/lists/").concat(t,"/invite-guest"),{guestName:a},j());case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),N=function(){var e=Object(f.a)(p.a.mark((function e(t,a){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("".concat(w,"/lists/").concat(t,"/uninvite-guest"),{guestId:a},j());case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),P=function(){var e=Object(f.a)(p.a.mark((function e(t,a){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("".concat(w,"/lists/").concat(t,"/accept-invite"),{user:a},j());case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),D=function(){var e=Object(f.a)(p.a.mark((function e(t,a){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("".concat(w,"/lists/").concat(t,"/decline-invite"),{user:a},j());case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),R=function(){var e=Object(f.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("".concat(w,"/lists/").concat(t,"/leave-list"),{},j());case 2:return a=e.sent,n=a.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(f.a)(p.a.mark((function e(t,a){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("".concat(w,"/lists/").concat(t,"/remove-guest"),{guestId:a},j());case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),V={config:j,setToken:function(e){O="bearer ".concat(e)},getListsByUser:C,addList:k,addItem:I,deleteItem:T,editItem:L,markItem:A,deleteList:S,editList:x,inviteGuest:_,uninviteGuest:N,acceptInvitation:P,declineInvitation:D,leaveList:R,removeGuest:M},F=function(){var e=Object(f.a)(p.a.mark((function e(t,a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("".concat(w,"/login"),{name:t,password:a});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),U=function(){var e=Object(f.a)(p.a.mark((function e(t,a,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("".concat(w,"/users"),{name:t,email:a,password:n});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),z=function(){var e=Object(f.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("".concat(w,"/users/").concat(t),V.config());case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(f.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("".concat(w,"/users/find-email/").concat(t),V.config());case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(f.a)(p.a.mark((function e(t,a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.patch("".concat(w,"/users/").concat(t,"/set-active-list"),{listId:a},V.config());case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),G=function(){var e=Object(f.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.patch("".concat(w,"/users/").concat(t,"/clear-active-list"),{},V.config());case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(f.a)(p.a.mark((function e(t,a,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.patch("".concat(w,"/users/").concat(t,"/change-name"),{name:a,password:n},V.config());case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),W=function(){var e=Object(f.a)(p.a.mark((function e(t,a,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.patch("".concat(w,"/users/").concat(t,"/change-email"),{email:a,password:n},V.config());case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),J=function(){var e=Object(f.a)(p.a.mark((function e(t,a,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.patch("".concat(w,"/users/").concat(t,"/change-password"),{oldPassword:a,newPassword:n},V.config());case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Z=function(){var e=Object(f.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("".concat(w,"/users/validate-token"),{token:t},V.config());case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K={login:F,register:U,getUser:z,getUserByEmail:B,setActiveList:H,clearActiveList:G,changeName:q,changeEmail:W,changePassword:J,requestReset:function(){var e=Object(f.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.post("".concat(w,"/users/send-reset-email"),{email:t},V.config());case 3:return a=e.sent,e.abrupt("return",a);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),validateToken:Z,resetPassword:function(){var e=Object(f.a)(p.a.mark((function e(t,a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.post("".concat(w,"/users/reset-password"),{email:t,password:a},V.config());case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}()},Y=function(e){return{type:"SET_DEVICE_TO_DESKTOP",payload:e}},$=function(e){return{type:"SET_LISTS",payload:e}},Q=function(){var e=Object(f.a)(p.a.mark((function e(t,a){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.getUser(t.id);case 2:n=e.sent,(r=n.activeList)&&(r.guests.map((function(e){return e.id})).includes(n.id)||r.user.id===n.id)&&a({type:"SET_ACTIVE_LIST",payload:r});case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),X=function(){var e=Object(f.a)(p.a.mark((function e(t,a,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.setActiveList(a.id,t.id);case 2:r=e.sent,n({type:"SET_ACTIVE_LIST",payload:r.activeList});case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),ee=function(){var e=Object(f.a)(p.a.mark((function e(t,a,n){var r,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.addList(t);case 2:return r=e.sent,e.next=5,K.getUser(a.id);case 5:return c=e.sent,e.next=8,K.setActiveList(c.id,r.id);case 8:n({type:"ADD_LIST",payload:r}),n({type:"SET_ACTIVE_LIST",payload:r});case 10:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),te=function(){var e=Object(f.a)(p.a.mark((function e(t,a,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.editList(t.id,a);case 2:n({type:"EDIT_LIST",payload:t});case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),ae=function(){var e=Object(f.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.deleteList(t.id);case 2:a({type:"DELETE_LIST",payload:t});case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ne=function(){var e=Object(f.a)(p.a.mark((function e(t,a,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.addItem(t.id,a);case 2:r=e.sent.data,n({type:"ADD_ITEM",payload:{list:t,item:r}});case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),re=function(){var e=Object(f.a)(p.a.mark((function e(t,a,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.deleteItem(t.id,a.id);case 2:n({type:"DELETE_ITEM",payload:{list:t,item:a}});case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),ce=function(){var e=Object(f.a)(p.a.mark((function e(t,a,n,r){var c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(h.a)(Object(h.a)({},a),{},{name:n}),e.next=3,V.editItem(t.id,c);case 3:r({type:"EDIT_ITEM",payload:{list:t,editedItem:c}});case 4:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),le=function(){var e=Object(f.a)(p.a.mark((function e(t,a,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(h.a)(Object(h.a)({},a),{},{strikethrough:!a.strikethrough}),e.next=3,V.markItem(t.id,a);case 3:n({type:"MARK_ITEM",payload:{list:t,editedItem:r}});case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),ie=function(){var e=Object(f.a)(p.a.mark((function e(t){var a,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=window.localStorage.getItem("loggedShoppingListAppUser"))){e.next=8;break}return n=JSON.parse(a),e.next=5,K.getUser(n.id);case 5:r=e.sent,n.listInvitations=r.listInvitations,t({type:"SET_USER",payload:{user:n}});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oe=function(){var e=Object(f.a)(p.a.mark((function e(t,a,n){var r,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.login(t,a);case 2:return r=e.sent,window.localStorage.setItem("loggedShoppingListAppUser",JSON.stringify(r)),e.next=6,K.getUser(r.id);case 6:c=e.sent,r.listInvitations=c.listInvitations,r&&(n({type:"CLEAR_ACTIVE_LIST"}),n({type:"SET_USER",payload:{user:r}}));case 9:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),se=function(){var e=Object(f.a)(p.a.mark((function e(t,a,n,r){var c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.register(t,a,n);case 2:return e.next=4,K.login(t,n);case 4:c=e.sent,r({type:"CLEAR_ACTIVE_LIST"}),r({type:"SET_USER",payload:{user:c}});case 7:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),ue=function(){var e=Object(f.a)(p.a.mark((function e(t,a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.clearActiveList(t.id);case 2:return e.next=4,V.getListsByUser();case 4:n=e.sent,a({type:"CLEAR_ACTIVE_LIST"}),a({type:"SET_LISTS",payload:n});case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),me=function(e){return{type:"INVITE_GUEST",payload:{list:e}}},de=function(e){return{type:"UNINVITE_GUEST",payload:{list:e}}},pe=function(){var e=Object(f.a)(p.a.mark((function e(t,a,n){var r,c,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.acceptInvitation(t.id,a.id);case 2:return r=e.sent,e.next=5,V.getListsByUser();case 5:return c=e.sent,e.next=8,K.setActiveList(a.id,r.id);case 8:l=e.sent,n({type:"ACCEPT_INVITATION",payload:{list:r,user:l}}),n({type:"SET_LISTS",payload:c}),n({type:"SET_ACTIVE_LIST",payload:l.activeList});case 12:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),fe=function(){var e=Object(f.a)(p.a.mark((function e(t,a,n){var r,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.declineInvitation(t.id,a.id);case 2:return r=e.sent,e.next=5,K.getUser(a.id);case 5:c=e.sent,n({type:"DECLINE_INVITATION",payload:{list:r,user:c}});case 7:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Ee=function(){var e=Object(f.a)(p.a.mark((function e(t,a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.leaveList(t.id);case 2:n=e.sent,a({type:"LEAVE_LIST",payload:{list:n}});case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),be=function(){var e=Object(f.a)(p.a.mark((function e(t,a,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.removeGuest(t.id,a.id);case 2:r=e.sent,n({type:"REMOVE_GUEST",payload:{list:r}});case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),ve=function(){var e=Object(f.a)(p.a.mark((function e(t,a){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a({type:"CHANGE_USER_NAME",payload:{user:t}}),(n=window.localStorage.getItem("loggedShoppingListAppUser"))&&((r=JSON.parse(n)).name=t.name,window.localStorage.setItem("loggedShoppingListAppUser",JSON.stringify(r)),a({type:"SET_USER",payload:{user:r}}));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),he=function(){var e=Object(f.a)(p.a.mark((function e(t,a){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a({type:"CHANGE_USER_EMAIL",payload:{user:t}}),(n=window.localStorage.getItem("loggedShoppingListAppUser"))&&((r=JSON.parse(n)).email=t.email,window.localStorage.setItem("loggedShoppingListAppUser",JSON.stringify(r)),a({type:"SET_USER",payload:{user:r}}));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ye=function(e){return{type:"SET_OPEN_MODAL_TYPE",payload:{modal:e}}};!function(e){e[e.None=0]="None",e[e.TestModal=1]="TestModal",e[e.LoginModal=2]="LoginModal",e[e.RegisterModal=3]="RegisterModal",e[e.RecoveryModal=4]="RecoveryModal"}(n||(n={}));var ge={lists:[],activeList:null,listModalOpen:!1,user:null,modalType:n.None,isDesktop:!0},we=Object(r.createContext)([ge,function(){return ge}]),Oe=function(e){var t=e.reducer,a=e.children,n=Object(r.useReducer)(t,ge),l=Object(o.a)(n,2),i=l[0],s=l[1];return c.a.createElement(we.Provider,{value:[i,s]},a)},je=function(){return Object(r.useContext)(we)},Ce=function(){var e=je(),t=Object(o.a)(e,2)[1];return c.a.createElement(E.a.Item,{name:"newList",as:"a",onClick:function(){return t({type:"OPEN_LIST_MODAL"})}},c.a.createElement(b.a,{name:"add",size:"tiny"}),"Add List")},ke=a(498),xe=a(30),Se=function(){var e=je(),t=Object(o.a)(e,2),a=t[0],n=a.lists,l=a.activeList,i=a.user,s=a.isDesktop,m=t[1],d=Object(u.g)(),E=Object(u.h)(),v=Object(xe.usePromiseTracker)().promiseInProgress;Object(r.useEffect)((function(){var e=function(){var e=Object(f.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V.getListsByUser();case 3:t=e.sent,m($(t)),i&&Object(xe.trackPromise)(Q(i,m)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();Object(xe.trackPromise)(e())}),[m]);var h=function(e){i&&(Object(xe.trackPromise)(X(e,i,m)),d.push("/list"))},y=function(){return!("/profile"===E.pathname||!l)};return v?c.a.createElement(ke.a,{item:!0,text:y()?null===l||void 0===l?void 0:l.name:"Select list",style:{minWidth:"11rem"}}):0===n.length?c.a.createElement(Ce,null):s?c.a.createElement(ke.a,{item:!0,text:y()?null===l||void 0===l?void 0:l.name:"Select list",style:{minWidth:"11rem"}},c.a.createElement(ke.a.Menu,null,n.map((function(e){return c.a.createElement(ke.a.Item,{key:e.id,onClick:function(){return h(e)}},l&&l.id===e.id?c.a.createElement(b.a,{name:"selected radio",size:"mini"}):c.a.createElement(b.a,{name:"circle outline",size:"mini"}),e.name)})),c.a.createElement(ke.a.Divider,null),c.a.createElement(Ce,null))):c.a.createElement(r.Fragment,null,c.a.createElement(ke.a.Header,{text:"Lists",style:{minWidth:"11rem"}},"Lists"),n.map((function(e){return c.a.createElement(ke.a.Item,{key:e.id,onClick:function(){return h(e)}},l&&l.id===e.id?c.a.createElement(b.a,{name:"selected radio",size:"mini"}):c.a.createElement(b.a,{name:"circle outline",size:"mini"}),e.name)})),c.a.createElement(Ce,null),c.a.createElement(ke.a.Divider,null))},Ie=a(492),Te=function(){var e=je(),t=Object(o.a)(e,2),a=t[0].user,l=t[1],i=Object(u.g)();return Object(r.useEffect)((function(){Object(xe.trackPromise)(ie(l))}),[]),c.a.createElement(r.Fragment,null,a?c.a.createElement(E.a.Item,{type:"button",onClick:function(){!function(e){window.localStorage.removeItem("loggedShoppingListAppUser"),V.setToken(""),e({type:"DISCARD_USER"})}(l),l(ye(n.None)),i.push("/")},color:"grey"},"Logout"):c.a.createElement(E.a.Item,{type:"button",onClick:function(){return l(ye(n.LoginModal))},color:"grey"},"Login"))},Le=function(){var e=je(),t=Object(o.a)(e,2),a=t[0].user,l=t[1];return c.a.createElement(r.Fragment,null,a?null:c.a.createElement(E.a.Item,{type:"button",onClick:function(){return l(ye(n.RegisterModal))},color:"grey"},"Register"))},Ae=function(){var e=je(),t=Object(o.a)(e,1)[0],a=t.user,n=t.isDesktop,r=Object(u.g)(),l=function(){if(!a)return null;var e=a.name.charAt(0);return e.toLowerCase()!=e.toUpperCase()?a.name.charAt(0).toUpperCase()+a.name.slice(1):a.name};return n?c.a.createElement(E.a,{borderless:!0,inverted:!0,size:"massive",style:{minHeight:"4.315rem"}},c.a.createElement(Ie.a,null,c.a.createElement(E.a.Item,{position:"left",header:!0},"Kauppalappu"),c.a.createElement(E.a.Menu,{position:"right"},a&&c.a.createElement(Se,null),a&&c.a.createElement(E.a.Item,{type:"button",onClick:function(){return r.push("/profile")},color:"grey"},c.a.createElement(b.a,{name:"user",size:"large"}),a.listInvitations&&a.listInvitations.length>0&&c.a.createElement("div",{className:"ui floating circular red label",style:{top:"0.3rem",left:"4.4rem"}},a.listInvitations.length),l()),c.a.createElement(Te,null),c.a.createElement(Le,null)))):c.a.createElement(E.a,{borderless:!0,inverted:!0,size:"huge",style:{minHeight:"4.077rem"}},c.a.createElement(Ie.a,null,c.a.createElement(E.a.Item,{header:!0,className:"mobile-logo"},"Kauppalappu"),c.a.createElement(ke.a,{item:!0,text:"Menu",className:"mobile-menu"},c.a.createElement(ke.a.Menu,null,a&&c.a.createElement(Se,null),a&&c.a.createElement(ke.a.Item,{type:"button",onClick:function(){return r.push("/profile")},color:"grey"},c.a.createElement(b.a,{name:"user",size:"large"}),l()),c.a.createElement(Te,null),c.a.createElement(Le,null)))))},_e=a(504),Ne=a(494),Pe=a(484),De=a(503),Re=a(495),Me=a(502),Ve=function(e){var t=e.open,a=e.onConfirm,n=e.onClose,r=e.list;return c.a.createElement(Re.a,{open:t,onClose:n,centered:!1,size:"tiny",closeIcon:!0},c.a.createElement(Re.a.Header,null,"Really delete list ",r.name,"?"),c.a.createElement(Re.a.Content,null,c.a.createElement(Me.a,null,c.a.createElement(Me.a.Column,{floated:"left",width:5},c.a.createElement(Pe.a,{type:"button",onClick:a,color:"red"},"Yes")),c.a.createElement(Me.a.Column,{floated:"right",width:5},c.a.createElement(Pe.a,{floated:"right",type:"button",onClick:n,color:"grey"},"No")))))},Fe=a(14),Ue=a(496),ze=a(493),Be=function(e){var t=e.field,a=e.label,n=e.placeholder,r=e.autoFocus;return c.a.createElement(Ue.a.Field,null,c.a.createElement("label",null,a),c.a.createElement(Fe.b,Object.assign({placeholder:n},t,{autoFocus:r})),c.a.createElement("div",{style:{color:"red"}},c.a.createElement(Fe.a,{name:t.name})))},He=function(e){var t=e.field,a=e.label,n=e.placeholder,l=e.autoFocus,i=Object(r.useState)(!1),s=Object(o.a)(i,2),u=s[0],m=s[1];return c.a.createElement(Ue.a.Field,null,c.a.createElement("label",null,a),c.a.createElement(ze.a,Object.assign({autoFocus:l,placeholder:n,type:u?"text":"password"},t,{icon:c.a.createElement(b.a,{name:u?"eye slash":"eye",size:"large",link:!0,onClick:function(){return m(!u)}})})),c.a.createElement("div",{style:{color:"red"}},c.a.createElement(Fe.a,{name:t.name})))},Ge=function(e){var t=e.onSubmit;return c.a.createElement(Fe.d,{initialValues:{name:""},onSubmit:t},(function(e){var t=e.isValid,a=e.dirty;return c.a.createElement(Fe.c,{className:"form ui"},c.a.createElement(Fe.b,{label:"Invite a user",placeholder:"Name",name:"name",component:Be,autoFocus:!0}),c.a.createElement(Me.a,null,c.a.createElement(Me.a.Column,{floated:"left",width:5},c.a.createElement(Pe.a,{type:"submit",floated:"left",color:"green",disabled:!a||!t},"Invite"))))}))},qe=function(e){var t=e.list,a=je(),n=Object(o.a)(a,2),l=n[0].user,i=n[1],s=function(){var e=Object(f.a)(p.a.mark((function e(a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V.uninviteGuest(t.id,a.id);case 3:n=e.sent,i(de(n)),l&&X(n,l,i),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();if(!t)return null;var u={padding:"7px 7px 7px 14px"};return 0===t.invitedGuests.length?c.a.createElement(r.Fragment,null,c.a.createElement("label",{style:{fontWeight:"bold"}},"Invitations"),c.a.createElement("p",{style:{fontSize:"1rem"}},"List has no pending invitations.")):c.a.createElement(r.Fragment,null,c.a.createElement("label",{style:{fontWeight:"bold"}},"Invitations"),t.invitedGuests.map((function(e){return c.a.createElement(De.a,{key:e.id},c.a.createElement(Me.a,null,c.a.createElement(Me.a.Column,{style:u,floated:"left",verticalAlign:"middle",width:5},c.a.createElement("span",null,e.name)),c.a.createElement(Me.a.Column,{style:u,floated:"right",width:5},c.a.createElement(Pe.a,{floated:"right",size:"mini",color:"red",onClick:function(){return s(e)},icon:"delete"}))))})))},We=function(e){var t=e.list,a=e.isGuest,n=je(),l=Object(o.a)(n,2),i=l[0].user,s=l[1],u=function(){var e=Object(f.a)(p.a.mark((function e(a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{be(t,a,s)}catch(n){console.log(n)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(!t)return null;var m={padding:"7px 7px 7px 14px"},d={fontSize:"1rem"},E={fontSize:"1rem",fontWeight:"bold"};return i?0===t.guests.length?c.a.createElement(r.Fragment,null,c.a.createElement("label",{style:{fontWeight:"bold"}},"Guests"),c.a.createElement("p",{style:d},"List has no guest users.")):a?c.a.createElement(r.Fragment,null,c.a.createElement("label",{style:{fontWeight:"bold"}},"Guests"),t.guests.map((function(e){return c.a.createElement(De.a,{size:"mini",key:e.id},c.a.createElement("span",{style:e.id===i.id?E:d},e.name))}))):c.a.createElement(r.Fragment,null,c.a.createElement("label",{style:{fontWeight:"bold"}},"Guests"),t.guests.map((function(e){return c.a.createElement(De.a,{key:e.id},c.a.createElement(Me.a,null,c.a.createElement(Me.a.Column,{style:m,floated:"left",verticalAlign:"middle",width:5},c.a.createElement("span",null,e.name)),c.a.createElement(Me.a.Column,{style:m,floated:"right",width:5},c.a.createElement(Pe.a,{floated:"right",size:"mini",color:"red",onClick:function(){return u(e)},icon:"delete"}))))}))):null},Je=function(e){var t=e.open,a=e.onClose,n=e.list,l=Object(r.useState)(!1),i=Object(o.a)(l,2),s=i[0],u=i[1],m=je(),d=Object(o.a)(m,2),E=d[0].user,v=d[1],h=function(){var e=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u(!1),a();try{ae(n,v)}catch(t){console.log(t)}case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(f.a)(p.a.mark((function e(t,a){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.guests.map((function(e){return e.name})).includes(t.name)&&!n.invitedGuests.map((function(e){return e.name})).includes(t.name)){e.next=2;break}return e.abrupt("return",a.setErrors({name:"User is already invited to the list."}));case 2:return e.prev=2,e.next=5,V.inviteGuest(n.id,t.name);case 5:r=e.sent,v(me(r)),E&&X(r,E,v),a.resetForm(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),a.setErrors({name:"User does not exist."});case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,a){return e.apply(this,arguments)}}(),g=function(){var e=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{E&&(Ee(n,v),ue(E,v),a())}catch(t){console.log(t)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(E){if(n.guests.map((function(e){return e.id})).includes(E.id))return c.a.createElement(Re.a,{open:t,onClose:a,centered:!1,size:"small",closeIcon:!0},c.a.createElement(Re.a.Header,null,"Configure list ",n.name),c.a.createElement(Re.a.Content,null,c.a.createElement(r.Fragment,null,c.a.createElement("label",{style:{fontWeight:"bold"}},"Owner of the list"),c.a.createElement(De.a,{size:"mini"},c.a.createElement("span",{style:{fontSize:"1rem"}},n.user.name)),c.a.createElement(Ne.a,null),c.a.createElement(We,{list:n,isGuest:!0}),c.a.createElement(Ne.a,null)),c.a.createElement(Pe.a,{color:"orange",onClick:g},c.a.createElement(b.a,{name:"delete"}),"Leave list"),c.a.createElement(Ve,{open:s,list:n,onConfirm:h,onClose:function(){return u(!1)}})),c.a.createElement(Re.a.Actions,null,c.a.createElement(Pe.a,{type:"button",onClick:a,color:"grey"},"Cancel")));if(n.user.id===E.id)return c.a.createElement(Re.a,{open:t,onClose:a,centered:!1,size:"small",closeIcon:!0},c.a.createElement(Re.a.Header,null,"Configure list ",n.name),c.a.createElement(Re.a.Content,null,c.a.createElement(r.Fragment,null,c.a.createElement("label",{style:{fontWeight:"bold"}},"Owner of the list"),c.a.createElement(De.a,{size:"mini"},c.a.createElement("span",{style:{fontSize:"1rem",fontWeight:"bold"}},n.user.name)),c.a.createElement(Ne.a,null),c.a.createElement(We,{list:n,isGuest:!1}),c.a.createElement(Ne.a,null),c.a.createElement(qe,{list:n}),c.a.createElement(Ne.a,null),c.a.createElement(Ge,{onSubmit:y}),c.a.createElement(Ne.a,null)),c.a.createElement(Pe.a,{color:"red",onClick:function(){return u(!0)}},c.a.createElement(b.a,{name:"delete"}),"Delete list"),c.a.createElement(Ve,{open:s,list:n,onConfirm:h,onClose:function(){return u(!1)}})),c.a.createElement(Re.a.Actions,null,c.a.createElement(Pe.a,{type:"button",onClick:a,color:"grey"},"Cancel")))}return c.a.createElement(Re.a,{open:t,onClose:a,centered:!1,size:"small",closeIcon:!0},c.a.createElement(Re.a.Header,null,"Login to edit the list"),c.a.createElement(Re.a.Actions,null,c.a.createElement(Pe.a,{type:"button",onClick:a,color:"grey"},"Cancel")))},Ze=function(e){var t=e.onSubmit,a=e.onCancel;return c.a.createElement(Fe.d,{initialValues:{name:""},onSubmit:t,validate:function(e){var t={};return e.name||(t.name="Field is required"),t}},(function(e){var t=e.isValid,n=e.dirty;return c.a.createElement(Fe.c,{className:"form ui"},c.a.createElement(Fe.b,{label:"Name of the item",placeholder:"Item",name:"name",component:Be,autoFocus:!0}),c.a.createElement(Me.a,null,c.a.createElement(Me.a.Column,{floated:"left",width:5},c.a.createElement(Pe.a,{type:"button",onClick:a,color:"red"},"Cancel")),c.a.createElement(Me.a.Column,{floated:"right",width:5},c.a.createElement(Pe.a,{type:"submit",floated:"right",color:"green",disabled:!n||!t},"Add"))))}))},Ke=function(e){var t=e.open,a=e.onClose,n=e.list,r=je(),l=Object(o.a)(r,2)[1],i=function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{ne(n,t.name,l)}catch(r){console.error(r)}a();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement(Re.a,{open:t,onClose:a,centered:!1,size:"tiny",closeIcon:!0},c.a.createElement(Re.a.Header,null,"Add item"),c.a.createElement(Re.a.Content,null,c.a.createElement(Ze,{onSubmit:i,onCancel:a})))},Ye=function(e){var t=e.onSubmit,a=e.onCancel,n=e.item;return c.a.createElement(Fe.d,{initialValues:{name:n?n.name:""},onSubmit:t,validate:function(e){var t={};return e.name||(t.name="Field is required"),t}},(function(e){var t=e.isValid,n=e.dirty;return c.a.createElement(Fe.c,{className:"form ui"},c.a.createElement(Fe.b,{label:"Name of the item",placeholder:"Name",name:"name",component:Be,autoFocus:!0}),c.a.createElement(Me.a,null,c.a.createElement(Me.a.Column,{floated:"left",width:5},c.a.createElement(Pe.a,{type:"button",onClick:a,color:"red"},"Cancel")),c.a.createElement(Me.a.Column,{floated:"right",width:5},c.a.createElement(Pe.a,{type:"submit",floated:"right",color:"green",disabled:!n||!t},"Confirm"))))}))},$e=function(e){var t=e.open,a=e.onClose,n=e.item,r=e.list,l=je(),i=Object(o.a)(l,2)[1],s=function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n&&ce(r,n,t.name,i)}catch(c){console.error(c)}a();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement(Re.a,{open:t,onClose:a,centered:!1,size:"tiny",closeIcon:!0},c.a.createElement(Re.a.Header,null,"Edit item"),c.a.createElement(Re.a.Content,null,c.a.createElement(Ye,{onSubmit:s,onCancel:a,item:n})))},Qe=a(91),Xe=function(e){var t=e.item,a=e.onClick,n=e.onRemove,r=e.onEdit,l=e.index,i=je(),s=Object(o.a)(i,1)[0].isDesktop;return c.a.createElement(Qe.b,{draggableId:t.id,index:l},(function(e){return c.a.createElement("div",Object.assign({},e.draggableProps,e.dragHandleProps,{ref:e.innerRef}),c.a.createElement(De.a,{onClick:a},c.a.createElement(Me.a,null,c.a.createElement(Me.a.Column,{floated:"left",verticalAlign:"middle",width:5},c.a.createElement("span",{style:t.strikethrough?{textDecoration:"line-through",color:"grey"}:{}},t.name)),c.a.createElement(Me.a.Column,{floated:"right",width:10,className:s?"":"item-button-container-mobile"},c.a.createElement(Pe.a,{floated:"right",size:"tiny",color:"red",onClick:n,icon:!0},c.a.createElement(b.a,{name:"delete"})),c.a.createElement(Pe.a,{floated:"right",size:"tiny",color:"olive",onClick:r,icon:!0},c.a.createElement(b.a,{name:"edit"}))))))}))},et=function(){var e=Object(r.useState)(!1),t=Object(o.a)(e,2),a=t[0],n=t[1],l=Object(r.useState)(null),i=Object(o.a)(l,2),s=i[0],m=i[1],d=Object(r.useState)(!1),E=Object(o.a)(d,2),h=E[0],y=E[1],g=je(),w=Object(o.a)(g,2),O=w[0],j=O.activeList,C=O.isDesktop,k=O.user,x=O.listModalOpen,S=w[1],I=Object(r.useRef)(null),T=Object(xe.usePromiseTracker)().promiseInProgress,L=function(){!I||!I.current||h||s||a||x||I.current.focus()};Object(r.useEffect)((function(){L()}));var A=function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!j){e.next=9;break}return e.prev=1,e.next=4,le(j,t,S);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j)try{re(j,t,S)}catch(a){console.error(a)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(f.a)(p.a.mark((function e(t){var a,n,r,c,l,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.destination,n=t.source,r=t.draggableId,a){e.next=3;break}return e.abrupt("return");case 3:if(a.droppableId!==n.droppableId||a.index!==n.index){e.next=5;break}return e.abrupt("return");case 5:if((c=null===j||void 0===j?void 0:j.items)&&j){l=Object(v.a)(c),(i=l.find((function(e){return e.id===r})))&&(l.splice(n.index,1),l.splice(a.index,0,i),j.items=l);try{te(j,l,S)}catch(o){console.error(o)}}case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return k?T?null:j?c.a.createElement(Ie.a,{className:C?"cont-style":"cont-style-mobile"},c.a.createElement(_e.a,{as:"h3",style:{paddingRight:"1rem",marginBottom:0}},j.name),c.a.createElement(Ne.a,null),0===j.items.length?"List has no items":c.a.createElement(Qe.a,{onDragEnd:N},c.a.createElement(Qe.c,{droppableId:j.id},(function(e){return c.a.createElement("div",Object.assign({ref:e.innerRef},e.droppableProps),j.items.map((function(e,t){return c.a.createElement(Xe,{index:t,key:e.id,item:e,onClick:function(){return A(e)},onRemove:function(t){_(e),t.stopPropagation()},onEdit:function(t){m(e),t.stopPropagation()}})})),e.placeholder)}))),c.a.createElement(Je,{open:a,onClose:function(){return n(!1)},list:j}),c.a.createElement(Ke,{open:h,onClose:function(){y(!1),L()},list:j}),c.a.createElement($e,{open:!!s,onClose:function(){return m(null)},list:j,item:s}),c.a.createElement(Ne.a,null),c.a.createElement(Pe.a,{style:{marginBottom:"1rem"},floated:"left",color:"olive",onClick:function(){return n(!0)}},c.a.createElement(b.a,{name:"edit"}),"Edit"),c.a.createElement(Pe.a,{style:{marginBottom:"1rem"},color:"green",floated:"right",onClick:function(){return y(!0)},ref:I},c.a.createElement(b.a,{name:"add"}),"Add Item")):c.a.createElement(Ie.a,{className:C?"cont-style":"cont-style-mobile"},c.a.createElement(_e.a,{as:"h2",style:{marginTop:"4rem",textAlign:"center"}},"Create or select a list.")):c.a.createElement(u.a,{to:"/"})},tt=function(e){var t=e.onSubmit,a=e.onCancel,n=je(),r=Object(o.a)(n,1)[0].lists;return c.a.createElement(Fe.d,{initialValues:{name:""},onSubmit:t,validate:function(e){var t={};return e.name||(t.name="Field is required"),r.map((function(e){return e.name})).includes(e.name)&&(t.name="List with that name already exists"),t}},(function(e){var t=e.isValid,n=e.dirty;return c.a.createElement(Fe.c,{className:"form ui"},c.a.createElement(Fe.b,{label:"Name of the list",placeholder:"Name",name:"name",component:Be,autoFocus:!0}),c.a.createElement(Me.a,null,c.a.createElement(Me.a.Column,{floated:"left",width:5},c.a.createElement(Pe.a,{type:"button",onClick:a,color:"red"},"Cancel")),c.a.createElement(Me.a.Column,{floated:"right",width:5},c.a.createElement(Pe.a,{type:"submit",floated:"right",color:"green",disabled:!n||!t},"Add"))))}))},at=function(){var e=je(),t=Object(o.a)(e,2),a=t[0],n=a.listModalOpen,r=a.user,l=t[1],i=function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l({type:"CLOSE_LIST_MODAL"});try{r&&Object(xe.trackPromise)(ee(t.name,r,l))}catch(a){console.error(a)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement(Re.a,{open:n,onClose:function(){return l({type:"CLOSE_LIST_MODAL"})},centered:!1,size:"tiny",closeIcon:!0},c.a.createElement(Re.a.Header,null,"Add a new list"),c.a.createElement(Re.a.Content,null,c.a.createElement(tt,{onSubmit:i,onCancel:function(){return l({type:"CLOSE_LIST_MODAL"})}})))},nt=a(499),rt=function(e){var t=e.onSubmit,a=e.onCancel,n=e.label,r=e.placeHolder,l=e.initialValue,i=e.type;return c.a.createElement(Fe.d,{initialValues:{name:l,password:""},onSubmit:t,validate:function(e){var t={};return e.name||(t.name="Field is required"),e.name===l&&("text"===i?t.name="Choose a new name.":"email"===i&&(t.name="Choose another email address.")),e.password||(t.password="Field is required."),"email"!==i||/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.name)||(t.name="Invalid email address."),t},validateOnChange:!0},(function(e){var t=e.isValid,l=e.dirty;return c.a.createElement(Fe.c,{className:"form ui"},c.a.createElement(Fe.b,{label:n,placeholder:r,name:"name",type:i,component:Be,autoFocus:!0}),c.a.createElement(Fe.b,{label:"Password",placeholder:"Password",name:"password",component:He,autoFocus:!1}),c.a.createElement(Me.a,null,c.a.createElement(Me.a.Column,{floated:"left",width:5},c.a.createElement(Pe.a,{type:"button",onClick:a,color:"red"},"Cancel")),c.a.createElement(Me.a.Column,{floated:"right",width:5},c.a.createElement(Pe.a,{type:"submit",floated:"right",color:"green",disabled:!l||!t},"Ok"))))}))},ct=function(e){var t=e.open,a=e.onSubmit,n=e.onClose,r=e.label,l=e.header,i=e.placeHolder,o=e.initialValue,s=e.type;return c.a.createElement(Re.a,{open:t,onClose:n,centered:!1,size:"tiny",closeIcon:!0},c.a.createElement(Re.a.Header,null,l),c.a.createElement(Re.a.Content,null,c.a.createElement(rt,{onSubmit:a,onCancel:n,label:r,type:s,placeHolder:i,initialValue:o})))},lt=function(e){var t=e.text,a=void 0===t?"Changed!":t;return c.a.createElement(r.Fragment,null,c.a.createElement(b.a,{style:{marginLeft:"1rem"},name:"check",color:"green"}),c.a.createElement("span",{style:{color:"#21ba45"}},a))},it=function(e){var t=e.user,a=je(),n=Object(o.a)(a,2),l=n[0].isDesktop,i=n[1],s=Object(r.useState)(!1),u=Object(o.a)(s,2),m=u[0],d=u[1],E=Object(r.useState)(!1),v=Object(o.a)(E,2),h=v[0],y=v[1],g=Object(r.useState)(!1),w=Object(o.a)(g,2),O=w[0],j=w[1];Object(r.useEffect)((function(){var e;return h&&(j(!0),e=setTimeout((function(){j(!1),y(!1)}),7500)),function(){return clearTimeout(e)}}),[h]);var C=function(){var e=Object(f.a)(p.a.mark((function e(a,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=13;break}return e.prev=1,e.next=4,K.changeName(t.id,a.name,a.password);case 4:r=e.sent,ve(r,i),d(!1),y(!0),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),400===e.t0.response.status?n.setErrors({name:"Username already taken."}):n.setErrors({password:"Invalid password."});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,a){return e.apply(this,arguments)}}();return t?l?c.a.createElement(nt.a.Row,null,c.a.createElement(nt.a.Cell,{width:2},"Username"),c.a.createElement(nt.a.Cell,null,t.name,O&&c.a.createElement(lt,null)),c.a.createElement(nt.a.Cell,{textAlign:"right"},c.a.createElement(Pe.a,{color:"olive",size:"mini",onClick:function(){return d(!0)}},c.a.createElement(b.a,{name:"edit"}),"Edit")),c.a.createElement(ct,{open:m,onSubmit:C,onClose:function(){return d(!1)},label:"Enter new name",header:"Change username",placeHolder:"Name",type:"text",initialValue:t.name})):c.a.createElement(nt.a.Row,{style:{paddingTop:0}},c.a.createElement(nt.a.Cell,null,"Username",O&&c.a.createElement(lt,null)),c.a.createElement(nt.a.Cell,{style:{paddingTop:0,paddingBottom:0}},c.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",textAlign:"justify",textJustify:"inter-word",marginTop:"1rem"}},c.a.createElement("p",{style:{lineHeight:"2rem",marginBottom:0}}," ",t.name),c.a.createElement(Pe.a,{style:{justifySelf:"end"},color:"olive",size:"mini",onClick:function(){return d(!0)}},c.a.createElement(b.a,{name:"edit"}),"Edit"))),c.a.createElement(ct,{open:m,onSubmit:C,onClose:function(){return d(!1)},label:"Enter new name",header:"Change username",placeHolder:"Name",type:"text",initialValue:t.name})):null},ot=function(e){var t=e.user,a=je(),n=Object(o.a)(a,2),l=n[0].isDesktop,i=n[1],s=Object(r.useState)(!1),u=Object(o.a)(s,2),m=u[0],d=u[1],E=Object(r.useState)(!1),v=Object(o.a)(E,2),h=v[0],y=v[1],g=Object(r.useState)(!1),w=Object(o.a)(g,2),O=w[0],j=w[1];Object(r.useEffect)((function(){var e;return h&&(j(!0),e=setTimeout((function(){j(!1),y(!1)}),7500)),function(){return clearTimeout(e)}}),[h]);var C=function(){var e=Object(f.a)(p.a.mark((function e(a,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=13;break}return e.prev=1,e.next=4,K.changeEmail(t.id,a.name,a.password);case 4:r=e.sent,he(r,i),d(!1),y(!0),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),400===e.t0.response.status?n.setErrors({name:e.t0.response.data}):n.setErrors({password:"Invalid password."});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,a){return e.apply(this,arguments)}}();return t?l?c.a.createElement(nt.a.Row,null,c.a.createElement(nt.a.Cell,{width:2},"Email"),c.a.createElement(nt.a.Cell,null,t.email?t.email:"",O&&c.a.createElement(lt,null)),c.a.createElement(nt.a.Cell,{textAlign:"right"},c.a.createElement(Pe.a,{color:"olive",size:"mini",onClick:function(){return d(!0)}},c.a.createElement(b.a,{name:"edit"}),"Edit")),c.a.createElement(ct,{open:m,onSubmit:C,onClose:function(){return d(!1)},label:"Email adress",type:"email",header:"Change email",placeHolder:"Email",initialValue:t.email?t.email:""})):c.a.createElement(nt.a.Row,{style:{paddingTop:0}},c.a.createElement(nt.a.Cell,{width:1},"Email",O&&c.a.createElement(lt,null)),c.a.createElement(nt.a.Cell,{style:{paddingTop:0,paddingBottom:0}},c.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",textAlign:"justify",textJustify:"inter-word",marginTop:"1rem"}},c.a.createElement("p",{style:{lineHeight:"2rem",marginBottom:0}},t.email?t.email:""),c.a.createElement(Pe.a,{style:{justifySelf:"end"},color:"olive",size:"mini",onClick:function(){return d(!0)}},c.a.createElement(b.a,{name:"edit"}),"Edit"))),c.a.createElement(ct,{open:m,onSubmit:C,onClose:function(){return d(!1)},label:"Email address",type:"email",header:"Change email",placeHolder:"Email",initialValue:t.email?t.email:""})):null},st=function(e){var t=e.onSubmit,a=e.onCancel,n=(e.showPassword,e.toggleShowPassword,e.validate);return c.a.createElement(Fe.d,{initialValues:{oldPassword:"",newPassword:""},onSubmit:t},(function(e){var t=e.isValid,r=e.dirty;return c.a.createElement(Fe.c,{className:"form ui"},c.a.createElement(Fe.b,{label:"Current password",placeholder:"Password",name:"oldPassword",component:He,autoFocus:!0}),c.a.createElement(Fe.b,{label:"New password",placeholder:"Password",name:"newPassword",component:He,autoFocus:!1,validate:n}),c.a.createElement(Me.a,{style:{paddingTop:"1rem"}},c.a.createElement(Me.a.Column,{floated:"left",width:5},c.a.createElement(Pe.a,{type:"button",onClick:a,color:"red"},"Cancel")),c.a.createElement(Me.a.Column,{floated:"right",width:5},c.a.createElement(Pe.a,{type:"submit",floated:"right",color:"green",disabled:!r||!t},"Ok"))))}))},ut=function(e){var t=e.open,a=e.onSubmit,n=e.onClose,l=e.header,i=e.validate,s=Object(r.useState)(!1),u=Object(o.a)(s,2),m=u[0],d=u[1];return c.a.createElement(Re.a,{open:t,onClose:n,centered:!1,size:"tiny",closeIcon:!0},c.a.createElement(Re.a.Header,null,l),c.a.createElement(Re.a.Content,null,c.a.createElement(st,{onSubmit:a,onCancel:function(){n(),d(!1)},showPassword:m,toggleShowPassword:function(){d(!m)},validate:i})))},mt=function(e){var t=e.user,a=je(),n=Object(o.a)(a,1)[0].isDesktop,l=Object(r.useState)(!1),i=Object(o.a)(l,2),s=i[0],u=i[1],m=Object(r.useState)(!1),d=Object(o.a)(m,2),E=d[0],v=d[1],h=Object(r.useState)(!1),y=Object(o.a)(h,2),g=y[0],w=y[1];Object(r.useEffect)((function(){var e;return E&&(w(!0),e=setTimeout((function(){w(!1),v(!1)}),7500)),function(){return clearTimeout(e)}}),[E]);var O=function(){var e=Object(f.a)(p.a.mark((function e(a,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=11;break}return e.prev=1,e.next=4,K.changePassword(t.id,a.oldPassword,a.newPassword);case 4:u(!1),v(!0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),401===e.t0.response.status?n.setErrors({oldPassword:"Invalid password."}):n.setErrors({newPassword:"Password is too short. Please use at least 5 characters."});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a){return e.apply(this,arguments)}}(),j=function(e){if(e.length<5)return"Password is too short. Please use at least 5 characters."};return t?n?c.a.createElement(nt.a.Row,null,c.a.createElement(nt.a.Cell,{width:2},"Password"),c.a.createElement(nt.a.Cell,null,"********",g&&c.a.createElement(lt,null)),c.a.createElement(nt.a.Cell,{textAlign:"right"},c.a.createElement(Pe.a,{color:"olive",size:"mini",onClick:function(){return u(!0)}},c.a.createElement(b.a,{name:"edit"}),"Edit")),c.a.createElement(ut,{open:s,onSubmit:O,onClose:function(){return u(!1)},header:"Change password",validate:j,initialValue:""})):c.a.createElement(nt.a.Row,{style:{paddingTop:0}},c.a.createElement(nt.a.Cell,null,"Password",g&&c.a.createElement(lt,null)),c.a.createElement(nt.a.Cell,{style:{paddingTop:0,paddingBottom:0}},c.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",textAlign:"justify",textJustify:"inter-word",marginTop:"1rem"}},c.a.createElement("p",{style:{lineHeight:"2rem",marginBottom:0}}," ","********"),c.a.createElement(Pe.a,{style:{justifySelf:"end"},color:"olive",size:"mini",onClick:function(){return u(!0)}},c.a.createElement(b.a,{name:"edit"}),"Edit"))),c.a.createElement(ut,{open:s,onSubmit:O,onClose:function(){return u(!1)},header:"Change password",validate:j,initialValue:""})):null},dt=function(e){var t=e.user,a=je(),n=Object(o.a)(a,2),l=n[0].isDesktop,i=n[1],s=Object(r.useState)(),m=Object(o.a)(s,2),d=m[0],E=m[1],v=Object(u.g)();Object(r.useEffect)((function(){E(t.listInvitations)}),[t]);var h=function(){var e=Object(f.a)(p.a.mark((function e(a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=4;break}return e.next=3,pe(a,t,i);case 3:v.push("/list");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(e){t&&fe(e,t,i)};if(!t||!d)return null;var g={padding:"1rem 0 1rem 0"};return l?c.a.createElement(r.Fragment,null,c.a.createElement(Ne.a,{style:g,horizontal:!0},c.a.createElement(_e.a,{as:"h4"},"List Invitations")),d&&0===d.length?c.a.createElement("p",{style:{paddingBottom:"1.3rem"}},"No new invitations."):c.a.createElement(nt.a,null,c.a.createElement(nt.a.Body,null,d&&d.map((function(e){return c.a.createElement(nt.a.Row,{key:e.id},c.a.createElement(nt.a.Cell,null,e.name," by ",e.user.name),c.a.createElement(nt.a.Cell,{textAlign:"right"},c.a.createElement(Pe.a,{positive:!0,size:"mini",onClick:function(){return h(e)}},c.a.createElement(b.a,{name:"check"}),"Accept"),c.a.createElement(Pe.a,{negative:!0,size:"mini",onClick:function(){return y(e)}},c.a.createElement(b.a,{name:"delete"}),"Decline")))}))))):c.a.createElement(r.Fragment,null,c.a.createElement(Ne.a,{style:g,horizontal:!0},c.a.createElement(_e.a,{as:"h4"},"List Invitations")),d&&0===d.length?c.a.createElement("p",{style:{paddingBottom:"1.3rem"}},"No new invitations."):c.a.createElement(nt.a,null,c.a.createElement(nt.a.Body,null,d&&d.map((function(e){return c.a.createElement(nt.a.Row,{key:e.id},c.a.createElement(nt.a.Cell,null,c.a.createElement("p",null,e.name," by ",e.user.name),c.a.createElement(Pe.a,{positive:!0,size:"mini",onClick:function(){return h(e)}},c.a.createElement(b.a,{name:"check"}),"Accept"),c.a.createElement(Pe.a,{negative:!0,size:"mini",onClick:function(){return y(e)},floated:"right"},c.a.createElement(b.a,{name:"delete"}),"Decline")))})))))},pt=function(){var e=je(),t=Object(o.a)(e,2),a=t[0],n=a.user,l=a.isDesktop,i=a.activeList,s=t[1],m=Object(r.useState)(),d=Object(o.a)(m,2),E=d[0],b=d[1],v=Object(xe.usePromiseTracker)().promiseInProgress,h=Object(u.g)();return Object(r.useEffect)((function(){s({type:"CLEAR_ACTIVE_LIST"})}),[s,null===n||void 0===n?void 0:n.listInvitations]),Object(r.useEffect)((function(){var e=!0;return function(){var t=Object(f.a)(p.a.mark((function t(){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=5;break}return t.next=3,K.getUser(n.id);case 3:a=t.sent,e&&b(a);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()(),function(){e=!1}}),[n]),n||h.push("/"),n&&E&&!v?i?c.a.createElement(u.a,{to:"/list"}):c.a.createElement(Ie.a,{className:l?"cont-style":"cont-style-mobile"},c.a.createElement(Ne.a,{style:{padding:"1rem 0 1rem 0"},horizontal:!0},c.a.createElement(_e.a,{as:"h4"},"Account information")),c.a.createElement(nt.a,{definition:!0},c.a.createElement(nt.a.Body,null,c.a.createElement(it,{user:E}),c.a.createElement(ot,{user:E}),c.a.createElement(mt,{user:E}))),c.a.createElement(dt,{user:E})):null},ft=function(e){var t=e.onSubmit;return c.a.createElement(Fe.d,{initialValues:{email:"",password:""},onSubmit:t,validateOnChange:!0,validateOnBlur:!1,validate:function(e){var t={};return e.password?e.password.length<5&&(t.password="Password is too short. Please use at least 5 characters."):t.password="Field is required.",t}},(function(e){var t=e.isValid,a=e.dirty;return c.a.createElement(Fe.c,{className:"form ui"},c.a.createElement(Fe.b,{label:"Email",placeholder:"Email",name:"email",component:Be,autoFocus:!0}),c.a.createElement(Fe.b,{label:"Password",placeholder:"Password",name:"password",component:He,autoFocus:!1}),c.a.createElement("div",{style:{marginBottom:"1rem"}}),c.a.createElement(Me.a,null,c.a.createElement(Me.a.Column,{floated:"left",width:5}),c.a.createElement(Me.a.Column,{floated:"right",width:5},c.a.createElement(Pe.a,{type:"submit",floated:"right",color:"green",disabled:!a||!t},"Save"))))}))},Et=a(265),bt=function(e){var t=e.className,a=void 0===t?"":t,n=Object(Et.a)(e,["className"]);return c.a.createElement(Pe.a,Object.assign({basic:!0,color:"blue",className:["link",a].join(" "),type:"button"},n))},vt=function(){var e=je(),t=Object(o.a)(e,2),a=t[0].isDesktop,l=t[1],i=Object(u.i)().token,s=Object(r.useState)(void 0),m=Object(o.a)(s,2),d=m[0],E=m[1],b=Object(r.useState)(!1),v=Object(o.a)(b,2),h=v[0],y=v[1];Object(r.useEffect)((function(){(function(){var e=Object(f.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,K.validateToken(i);case 3:t=e.sent,E(t.data.id),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),E("");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[i]);var g=function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d&&(K.resetPassword(t.email,t.password),y(!0));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w={marginTop:"2rem",marginBottom:"1rem",textAlign:"center"};return void 0===d?null:""===d?c.a.createElement(Ie.a,{className:a?"cont-style":"cont-style-mobile",style:a?{width:"60%"}:{}},c.a.createElement(_e.a,{as:"h2",style:w},"Password reset link expired."),c.a.createElement("div",{className:"center-container"},c.a.createElement(bt,{onClick:function(){return l(ye(n.RecoveryModal))}},"Click here to request a new one."))):h?c.a.createElement(Ie.a,{className:a?"cont-style":"cont-style-mobile",style:a?{width:"60%"}:{}},c.a.createElement(_e.a,{as:"h2",style:w},"Password changed."),c.a.createElement("div",{className:"center-container"},c.a.createElement(Pe.a,{secondary:!0,content:"Login",onClick:function(){return l(ye(n.LoginModal))}}))):c.a.createElement(Ie.a,{className:a?"cont-style":"cont-style-mobile",style:a?{width:"60%"}:{}},c.a.createElement(_e.a,{as:"h2",style:w},"Set new password"),c.a.createElement(ft,{onSubmit:g}))},ht=function(){var e=je(),t=Object(o.a)(e,2),a=t[0],r=a.user,l=a.isDesktop,i=t[1];return Object(xe.usePromiseTracker)().promiseInProgress?null:r?c.a.createElement(u.a,{to:"/list"}):c.a.createElement(Ie.a,{style:{padding:"0 4.6rem"}},c.a.createElement(_e.a,{as:"h2",style:{marginTop:"4rem",textAlign:"center"}},"Please login or register to use the site."),c.a.createElement(De.a,{basic:!0,textAlign:"center"},c.a.createElement(Pe.a,{style:l?{marginRight:"1rem"}:{marginBottom:"1rem"},secondary:!0,content:"Login",onClick:function(){return i(ye(n.LoginModal))}}),c.a.createElement(Pe.a,{style:l?{marginLeft:"1rem"}:null,secondary:!0,content:"Register",onClick:function(){return i(ye(n.RegisterModal))}})))},yt=a(500),gt=function(e){var t=e.onSubmit,a=e.onCancel,r=e.loginFailed,l=je(),i=Object(o.a)(l,2)[1];return c.a.createElement(Fe.d,{initialValues:{name:"",password:""},onSubmit:t,validateOnChange:!1,validateOnBlur:!1,validate:function(e){var t={};return e.name||(t.name="Field is required"),e.password||(t.password="Field is required"),t}},(function(e){var t=e.isValid,l=e.dirty;return c.a.createElement(Fe.c,{className:"form ui"},c.a.createElement(Fe.b,{label:"Username or email",placeholder:"Username / email",name:"name",component:Be,autoFocus:!0}),c.a.createElement(Fe.b,{label:"Password",placeholder:"Password",name:"password",component:He}),r&&c.a.createElement(yt.a,{negative:!0},c.a.createElement("p",null,"Invalid username or password.")),c.a.createElement("div",{style:{marginBottom:"1rem"}},c.a.createElement(bt,{onClick:function(){return i(ye(n.RecoveryModal))}},"Forgot password?")),c.a.createElement(Me.a,null,c.a.createElement(Me.a.Column,{floated:"left",width:5},c.a.createElement(Pe.a,{type:"button",onClick:a,color:"red"},"Cancel")),c.a.createElement(Me.a.Column,{floated:"right",width:5},c.a.createElement(Pe.a,{type:"submit",floated:"right",color:"green",disabled:!l||!t},"Login"))))}))},wt=function(e){var t=e.open,a=je(),l=Object(o.a)(a,2)[1],i=Object(r.useState)(!1),s=Object(o.a)(i,2),m=s[0],d=s[1],E=Object(u.g)(),b=function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,oe(t.name,t.password,l);case 3:l(ye(n.None)),d(!1),E.push("/list"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),d(!0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement(Re.a,{open:t,onClose:function(){return l(ye(n.None))},centered:!1,size:"tiny",closeIcon:!0},c.a.createElement(Re.a.Header,null,"Login"),c.a.createElement(Re.a.Content,null,c.a.createElement(gt,{onSubmit:b,onCancel:function(){return l(ye(n.None))},loginFailed:m})))},Ot=function(e){var t=e.onSubmit,a=e.onCancel,r=je(),l=Object(o.a)(r,2)[1];return c.a.createElement(Fe.d,{initialValues:{name:"",email:"",password:""},onSubmit:t,validateOnChange:!0,validateOnBlur:!0,validate:function(e){var t={};return e.name||(t.name="Field is required"),e.name.length<3&&(t.name="Name is too short. Please use at least 3 characters."),e.password||(t.password="Field is required"),e.password.length<5&&(t.password="Password is too short. Please use at least 5 characters"),e.email&&!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)&&(t.email="Invalid email address"),t}},(function(e){var t=e.isValid,r=e.dirty;return c.a.createElement(Fe.c,{className:"form ui"},c.a.createElement(Fe.b,{label:"Username",placeholder:"Username",name:"name",component:Be,autoFocus:!0}),c.a.createElement(Fe.b,{label:"Password",placeholder:"Password",name:"password",component:He}),c.a.createElement(Fe.b,{label:"Email",placeholder:"Optional email address. Can be added later in account settings",name:"email",component:Be}),c.a.createElement("div",{style:{marginBottom:"1rem"}},c.a.createElement(bt,{onClick:function(){return l(ye(n.LoginModal))}},"Already have an account? Click here to login.")),c.a.createElement(Me.a,null,c.a.createElement(Me.a.Column,{floated:"left",width:5},c.a.createElement(Pe.a,{type:"button",onClick:a,color:"red"},"Cancel")),c.a.createElement(Me.a.Column,{floated:"right",width:5},c.a.createElement(Pe.a,{type:"submit",floated:"right",color:"green",disabled:!r||!t},"Confirm"))))}))},jt=function(e){var t=e.open,a=je(),r=Object(o.a)(a,2)[1],l=Object(u.g)(),i=function(){r(ye(n.None))},s=function(){var e=Object(f.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,se(t.name,t.email,t.password,r);case 3:l.push("/list"),r(ye(n.None)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),e.t0.response.data.error&&(e.t0.response.data.error.includes("name")?a.setErrors({name:e.t0.response.data.error}):e.t0.response.data.error.includes("address")&&a.setErrors({email:e.t0.response.data.error}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}();return c.a.createElement(Re.a,{open:t,onClose:i,centered:!1,size:"tiny",closeIcon:!0},c.a.createElement(Re.a.Header,null,"Register"),c.a.createElement(Re.a.Content,null,c.a.createElement(Ot,{onSubmit:s,onCancel:i})))},Ct=function(e){var t=e.onSubmit,a=e.onCancel,n=e.emailFound,r=e.emailNotFound,l=e.resetMessage;return c.a.createElement(Fe.d,{initialValues:{email:""},onSubmit:t,validateOnChange:!0,validateOnBlur:!1,validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Field is required",l(),t}},(function(e){var t=e.isValid,l=e.dirty,i=e.resetForm,o=e.values;return n&&o.email&&i(),c.a.createElement(Fe.c,{className:"form ui"},c.a.createElement(Fe.b,{label:"Email",placeholder:"Email",name:"email",component:Be,autoFocus:!0}),n&&c.a.createElement(yt.a,{info:!0},c.a.createElement("p",{style:{textAlign:"center"}},"Password reset email sent. Please check your mailbox and follow the link provided to reset your password.")),r&&c.a.createElement(yt.a,{negative:!0},c.a.createElement("p",null,"Email is not in use.")),c.a.createElement("div",{style:{marginBottom:"1rem"}}),c.a.createElement(Me.a,null,c.a.createElement(Me.a.Column,{floated:"left",width:5},c.a.createElement(Pe.a,{type:"button",onClick:a,color:"red"},"Cancel")),c.a.createElement(Me.a.Column,{floated:"right",width:5},c.a.createElement(Pe.a,{type:"submit",floated:"right",color:"green",disabled:!l||!t},"Send"))))}))},kt=function(e){var t=e.open,a=je(),l=Object(o.a)(a,2)[1],i=Object(r.useState)(!1),s=Object(o.a)(i,2),u=s[0],m=s[1],d=Object(r.useState)(!1),E=Object(o.a)(d,2),b=E[0],v=E[1],h=function(){m(!1),v(!1),l(ye(n.None))},y=function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.requestReset(t.email);case 2:200===e.sent.status?(v(!1),m(!0)):(m(!1),v(!0));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement(Re.a,{open:t,onClose:h,centered:!1,size:"tiny",closeIcon:!0},c.a.createElement(Re.a.Header,null,"Request a password reset"),c.a.createElement(Re.a.Content,null,c.a.createElement(Ct,{onSubmit:y,onCancel:h,emailFound:u,emailNotFound:b,resetMessage:function(){m(!1),v(!1)}})))},xt=a(263),St=a.n(xt),It=function(){return Object(xe.usePromiseTracker)().promiseInProgress?c.a.createElement("div",{style:{width:"100%",height:"80",display:"flex",justifyContent:"center",alignItems:"center"}},c.a.createElement(St.a,{type:"ThreeDots",color:"#1b1c1d",height:80,width:80})):null},Tt=function(){var e=je(),t=Object(o.a)(e,2),a=t[0].modalType,l=t[1],i=Object(m.useMediaQuery)({minDeviceWidth:900},void 0,(function(e){l(Y(e))}));return Object(r.useEffect)((function(){l(Y(i))}),[l,i]),c.a.createElement(s.a,null,c.a.createElement("div",null,c.a.createElement(Ae,null),c.a.createElement(It,null),c.a.createElement(Ie.a,null,c.a.createElement(u.d,null,c.a.createElement(u.b,{path:"/profile"},c.a.createElement(pt,null)),c.a.createElement(u.b,{path:"/list"},c.a.createElement(et,null)),c.a.createElement(u.b,{path:"/users/reset-password/:token"},c.a.createElement(vt,null)),c.a.createElement(u.b,{path:"/users/reset-password/"},c.a.createElement("p",null,"Test")),c.a.createElement(u.b,{path:"/"},c.a.createElement(ht,null))),c.a.createElement(at,null),c.a.createElement(wt,{open:a===n.LoginModal}),c.a.createElement(jt,{open:a===n.RegisterModal}),c.a.createElement(kt,{open:a===n.RecoveryModal}))))};a(482);i.a.render(c.a.createElement(Oe,{reducer:function(e,t){switch(t.type){case"SET_DEVICE_TO_DESKTOP":return Object(h.a)(Object(h.a)({},e),{},{isDesktop:t.payload});case"SET_LISTS":return Object(h.a)(Object(h.a)({},e),{},{lists:t.payload});case"SET_ACTIVE_LIST":return Object(h.a)(Object(h.a)({},e),{},{activeList:t.payload});case"CLEAR_ACTIVE_LIST":return Object(h.a)(Object(h.a)({},e),{},{activeList:null});case"OPEN_LIST_MODAL":return Object(h.a)(Object(h.a)({},e),{},{listModalOpen:!0});case"CLOSE_LIST_MODAL":return Object(h.a)(Object(h.a)({},e),{},{listModalOpen:!1});case"ADD_LIST":return Object(h.a)(Object(h.a)({},e),{},{lists:[].concat(Object(v.a)(e.lists),[t.payload])});case"EDIT_LIST":return Object(h.a)(Object(h.a)({},e),{},{activeList:t.payload});case"DELETE_LIST":return Object(h.a)(Object(h.a)({},e),{},{lists:e.lists.filter((function(e){return e.id!==t.payload.id})),activeList:null});case"ADD_ITEM":return t.payload.list.items.push(t.payload.item),Object(h.a)(Object(h.a)({},e),{},{lists:e.lists.map((function(e){return e.id===t.payload.list.id?t.payload.list:e}))});case"DELETE_ITEM":return t.payload.list.items=t.payload.list.items.filter((function(e){return e.id!==t.payload.item.id})),Object(h.a)(Object(h.a)({},e),{},{lists:e.lists.map((function(e){return e.id===t.payload.list.id?t.payload.list:e}))});case"EDIT_ITEM":case"MARK_ITEM":return t.payload.list.items=t.payload.list.items.map((function(e){return e.id===t.payload.editedItem.id?t.payload.editedItem:e})),Object(h.a)(Object(h.a)({},e),{},{lists:e.lists.map((function(e){return e.id===t.payload.list.id?t.payload.list:e}))});case"SET_USER":return V.setToken(t.payload.user.token),Object(h.a)(Object(h.a)({},e),{},{user:t.payload.user});case"DISCARD_USER":return Object(h.a)(Object(h.a)({},e),{},{user:null});case"INVITE_GUEST":case"UNINVITE_GUEST":return Object(h.a)(Object(h.a)({},e),{},{lists:e.lists.map((function(e){return e.id===t.payload.list.id?t.payload.list:e}))});case"ACCEPT_INVITATION":return Object(h.a)(Object(h.a)({},e),{},{lists:e.lists.map((function(e){return e.id===t.payload.list.id?t.payload.list:e})),user:Object(h.a)(Object(h.a)({},e.user),{},{listInvitations:t.payload.user.listInvitations})});case"DECLINE_INVITATION":return Object(h.a)(Object(h.a)({},e),{},{user:Object(h.a)(Object(h.a)({},e.user),{},{listInvitations:t.payload.user.listInvitations})});case"LEAVE_LIST":return Object(h.a)(Object(h.a)({},e),{},{lists:e.lists.map((function(e){return e.id===t.payload.list.id?t.payload.list:e}))});case"REMOVE_GUEST":return Object(h.a)(Object(h.a)({},e),{},{lists:e.lists.map((function(e){return e.id===t.payload.list.id?t.payload.list:e})),activeList:t.payload.list});case"CHANGE_USER_NAME":case"CHANGE_USER_EMAIL":return Object(h.a)(Object(h.a)({},e),{},{user:t.payload.user});case"SET_OPEN_MODAL_TYPE":return Object(h.a)(Object(h.a)({},e),{},{modalType:t.payload.modal});default:return e}}},c.a.createElement(Tt,null)),document.getElementById("root"))}},[[276,1,2]]]);
//# sourceMappingURL=main.201da183.chunk.js.map