(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{260:function(e,t,n){e.exports=n(444)},443:function(e,t,n){},444:function(e,t,n){"use strict";n.r(t);var a,r=n(0),c=n.n(r),i=n(35),l=n.n(i),o=n(10),u=n(225),s=n(5),m=n.n(s),p=n(9),d=n(461),f=n(70),E=n(116),b=n(11),v=n(22),y=n.n(v),h=null,O=function(){return{headers:{Authorization:h}}},g=function(){var e=Object(p.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get("".concat("/api","/lists"),O());case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(p.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.post("".concat("/api","/lists"),{name:t},O());case 2:return n=e.sent,a=n.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(p.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.put("".concat("/api","/lists/").concat(t,"/update"),{items:n},O());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),C=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.delete("".concat("/api","/lists/").concat(t),O());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(p.a)(m.a.mark((function e(t,n){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.post("".concat("/api","/lists/").concat(t,"/add-item"),{name:n},O());case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),I=function(){var e=Object(p.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.delete("".concat("/api","/lists/").concat(t,"/delete-item/").concat(n),O());case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),S=function(){var e=Object(p.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.patch("".concat("/api","/lists/").concat(t,"/edit-item"),{item:n},O());case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),k=function(){var e=Object(p.a)(m.a.mark((function e(t,n){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.post("".concat("/api","/lists/").concat(t,"/invite-guest"),{guestName:n},O());case 2:return a=e.sent,r=a.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),L=function(){var e=Object(p.a)(m.a.mark((function e(t,n){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.post("".concat("/api","/lists/").concat(t,"/uninvite-guest"),{guestId:n},O());case 2:return a=e.sent,r=a.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),T=function(){var e=Object(p.a)(m.a.mark((function e(t,n){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.post("".concat("/api","/lists/").concat(t,"/accept-invite"),{user:n},O());case 2:return a=e.sent,r=a.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),_=function(){var e=Object(p.a)(m.a.mark((function e(t,n){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.post("".concat("/api","/lists/").concat(t,"/decline-invite"),{user:n},O());case 2:return a=e.sent,r=a.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),A=function(){var e=Object(p.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.post("".concat("/api","/lists/").concat(t,"/leave-list"),{},O());case 2:return n=e.sent,a=n.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(p.a)(m.a.mark((function e(t,n){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.post("".concat("/api","/lists/").concat(t,"/remove-guest"),{guestId:n},O());case 2:return a=e.sent,r=a.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),U={config:O,setToken:function(e){h="bearer ".concat(e)},getListsByUser:g,addList:w,addItem:x,deleteItem:I,editItem:S,deleteList:C,editList:j,inviteGuest:k,uninviteGuest:L,acceptInvitation:T,declineInvitation:_,leaveList:A,removeGuest:N},D={login:function(){var e=Object(p.a)(m.a.mark((function e(t,n){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.post("".concat("/api","/login"),{name:t,password:n});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),register:function(){var e=Object(p.a)(m.a.mark((function e(t,n,a){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.post("".concat("/api","/users"),{name:t,email:n,password:a});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),getUser:function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get("".concat("/api","/users/").concat(t),U.config());case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setActiveList:function(){var e=Object(p.a)(m.a.mark((function e(t,n){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.patch("".concat("/api","/users/").concat(t,"/set-active-list"),{listId:n},U.config());case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),clearActiveList:function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.patch("".concat("/api","/users/").concat(t,"/clear-active-list"),{},U.config());case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),changeName:function(){var e=Object(p.a)(m.a.mark((function e(t,n){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.patch("".concat("/api","/users/").concat(t,"/change-name"),{name:n},U.config());case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),changeEmail:function(){var e=Object(p.a)(m.a.mark((function e(t,n){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.patch("".concat("/api","/users/").concat(t,"/change-email"),{email:n},U.config());case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},V=function(e){return{type:"SET_DEVICE_TO_DESKTOP",payload:e}},R=function(e){return{type:"SET_LISTS",payload:e}},F=function(){var e=Object(p.a)(m.a.mark((function e(t,n){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.getUser(t.id);case 2:a=e.sent,(r=a.activeList)&&(r.guests.map((function(e){return e.id})).includes(a.id)||r.user.id===a.id)&&n({type:"SET_ACTIVE_LIST",payload:r});case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),z=function(){var e=Object(p.a)(m.a.mark((function e(t,n,a){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.setActiveList(n.id,t.id);case 2:r=e.sent,a({type:"SET_ACTIVE_LIST",payload:r.activeList});case 4:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),P=function(){var e=Object(p.a)(m.a.mark((function e(t,n,a){var r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.addList(t);case 2:return r=e.sent,e.next=5,D.getUser(n.id);case 5:return c=e.sent,e.next=8,D.setActiveList(c.id,r.id);case 8:a({type:"ADD_LIST",payload:r}),a({type:"SET_ACTIVE_LIST",payload:r});case 10:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),G=function(){var e=Object(p.a)(m.a.mark((function e(t,n,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.editList(t.id,n);case 2:a({type:"EDIT_LIST",payload:t});case 3:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),M=function(){var e=Object(p.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.deleteList(t.id);case 2:n({type:"DELETE_LIST",payload:t});case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),H=function(){var e=Object(p.a)(m.a.mark((function e(t,n,a){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.addItem(t.id,n);case 2:r=e.sent.data,a({type:"ADD_ITEM",payload:{list:t,item:r}});case 4:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),W=function(){var e=Object(p.a)(m.a.mark((function e(t,n,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.deleteItem(t.id,n.id);case 2:a({type:"DELETE_ITEM",payload:{list:t,item:n}});case 3:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),B=function(){var e=Object(p.a)(m.a.mark((function e(t,n,a,r){var c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(b.a)(Object(b.a)({},n),{},{name:a}),e.next=3,U.editItem(t.id,c);case 3:r({type:"EDIT_ITEM",payload:{list:t,editedItem:c}});case 4:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),J=function(){var e=Object(p.a)(m.a.mark((function e(t,n,a){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.login(t,n);case 2:(r=e.sent)&&(a({type:"CLEAR_ACTIVE_LIST"}),a({type:"SET_USER",payload:{user:r}}));case 4:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),q=function(){var e=Object(p.a)(m.a.mark((function e(t,n,a,r){var c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.register(t,n,a);case 2:return e.next=4,D.login(t,a);case 4:c=e.sent,r({type:"CLEAR_ACTIVE_LIST"}),r({type:"SET_USER",payload:{user:c}});case 7:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),Z=function(){var e=Object(p.a)(m.a.mark((function e(t,n){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.clearActiveList(t.id);case 2:return e.next=4,U.getListsByUser();case 4:a=e.sent,n({type:"CLEAR_ACTIVE_LIST"}),n({type:"SET_LISTS",payload:a});case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),K=function(e){return{type:"INVITE_GUEST",payload:{list:e}}},$=function(e){return{type:"UNINVITE_GUEST",payload:{list:e}}},Q=function(){var e=Object(p.a)(m.a.mark((function e(t,n,a){var r,c,i,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.acceptInvitation(t.id,n.id);case 2:return r=e.sent,e.next=5,D.getUser(n.id);case 5:return c=e.sent,e.next=8,U.getListsByUser();case 8:return i=e.sent,a({type:"ACCEPT_INVITATION",payload:{list:r,user:c}}),a({type:"SET_LISTS",payload:i}),e.next=13,D.setActiveList(c.id,r.id);case 13:l=e.sent,a({type:"SET_ACTIVE_LIST",payload:l});case 15:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),Y=function(){var e=Object(p.a)(m.a.mark((function e(t,n,a){var r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.declineInvitation(t.id,n.id);case 2:return r=e.sent,e.next=5,D.getUser(n.id);case 5:c=e.sent,a({type:"DECLINE_INVITATION",payload:{list:r,user:c}});case 7:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),X=function(){var e=Object(p.a)(m.a.mark((function e(t,n){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.leaveList(t.id);case 2:a=e.sent,n({type:"LEAVE_LIST",payload:{list:a}});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ee=function(){var e=Object(p.a)(m.a.mark((function e(t,n,a){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.removeGuest(t.id,n.id);case 2:r=e.sent,a({type:"REMOVE_GUEST",payload:{list:r}});case 4:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),te=function(){var e=Object(p.a)(m.a.mark((function e(t,n){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n({type:"CHANGE_USER_NAME",payload:{user:t}}),(a=window.localStorage.getItem("loggedShoppingListAppUser"))&&((r=JSON.parse(a)).name=t.name,window.localStorage.setItem("loggedShoppingListAppUser",JSON.stringify(r)),n({type:"SET_USER",payload:{user:r}}));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ne=function(){var e=Object(p.a)(m.a.mark((function e(t,n){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n({type:"CHANGE_USER_EMAIL",payload:{user:t}}),(a=window.localStorage.getItem("loggedShoppingListAppUser"))&&((r=JSON.parse(a)).email=t.email,window.localStorage.setItem("loggedShoppingListAppUser",JSON.stringify(r)),n({type:"SET_USER",payload:{user:r}}));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();!function(e){e[e.None=0]="None",e[e.TestModal=1]="TestModal"}(a||(a={}));var ae={lists:[],activeList:null,profilePageOpen:!1,listModalOpen:!1,user:null,modalType:a.None,isDesktop:!0},re=Object(r.createContext)([ae,function(){return ae}]),ce=function(e){var t=e.reducer,n=e.children,a=Object(r.useReducer)(t,ae),i=Object(o.a)(a,2),l=i[0],u=i[1];return c.a.createElement(re.Provider,{value:[l,u]},n)},ie=function(){return Object(r.useContext)(re)},le=function(){var e=ie(),t=Object(o.a)(e,2)[1];return c.a.createElement(d.a.Item,{name:"newList",as:"a",onClick:function(){return t({type:"OPEN_LIST_MODAL"})}},c.a.createElement(f.a,{name:"add",size:"tiny"}),"Add List")},oe=n(457),ue=function(){var e=ie(),t=Object(o.a)(e,2),n=t[0],a=n.lists,i=n.activeList,l=n.user,u=n.profilePageOpen,s=n.isDesktop,d=t[1];Object(r.useEffect)((function(){(function(){var e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.getListsByUser();case 3:t=e.sent,d(R(t)),l&&F(l,d),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[d,l]);var E=function(e){l&&(z(e,l,d),d({type:"CLOSE_PROFILE_PAGE"}))};return 0===a.length?c.a.createElement(le,null):s?c.a.createElement(oe.a,{item:!0,text:i&&!u?i.name:"Select list",style:{minWidth:"11rem"}},c.a.createElement(oe.a.Menu,null,a.map((function(e){return c.a.createElement(oe.a.Item,{key:e.id,onClick:function(){return E(e)}},e.name)})),c.a.createElement(oe.a.Divider,null),c.a.createElement(le,null))):c.a.createElement(r.Fragment,null,c.a.createElement(oe.a.Header,{text:"Lists",style:{minWidth:"11rem"}},"Lists"),a.map((function(e){return c.a.createElement(oe.a.Item,{key:e.id,onClick:function(){return E(e)}},i&&i.id===e.id?c.a.createElement(f.a,{name:"selected radio",size:"mini"}):c.a.createElement(f.a,{name:"circle outline",size:"mini"}),e.name)})),c.a.createElement(le,null),c.a.createElement(oe.a.Divider,null))},se=n(452),me=n(455),pe=n(459),de=n(462),fe=n(460),Ee=n(19),be=n(454),ve=function(e){var t=e.field,n=e.label,a=e.placeholder,r=e.autoFocus;return c.a.createElement(be.a.Field,null,c.a.createElement("label",null,n),c.a.createElement(Ee.b,Object.assign({placeholder:a},t,{autoFocus:r})),c.a.createElement("div",{style:{color:"red"}},c.a.createElement(Ee.a,{name:t.name})))},ye=function(e){var t=e.field,n=e.label,a=e.placeholder;return c.a.createElement(be.a.Field,null,c.a.createElement("label",null,n),c.a.createElement(Ee.b,Object.assign({type:"password",placeholder:a},t,{autoFocus:!1})),c.a.createElement("div",{style:{color:"red"}},c.a.createElement(Ee.a,{name:t.name})))},he=function(e){var t=e.onSubmit,n=e.onCancel,a=e.loginFailed;return c.a.createElement(Ee.d,{initialValues:{name:"",password:""},onSubmit:t,validate:function(e){var t={};return e.name||(t.name="Field is required"),e.password||(t.password="Field is required"),t}},(function(e){var t=e.isValid,r=e.dirty;return c.a.createElement(Ee.c,{className:"form ui"},c.a.createElement(Ee.b,{label:"Username",placeholder:"Username",name:"name",component:ve,autoFocus:!0}),c.a.createElement(Ee.b,{label:"Password",placeholder:"Password",name:"password",component:ye}),a&&c.a.createElement(pe.a,{negative:!0},c.a.createElement("p",null,"Invalid username or password.")),c.a.createElement(de.a,null,c.a.createElement(de.a.Column,{floated:"left",width:5},c.a.createElement(fe.a,{type:"button",onClick:n,color:"red"},"Cancel")),c.a.createElement(de.a.Column,{floated:"right",width:5},c.a.createElement(fe.a,{type:"submit",floated:"right",color:"green",disabled:!r||!t},"Login"))))}))},Oe=function(e){var t=e.open,n=e.onClose,a=ie(),i=Object(o.a)(a,2)[1],l=Object(r.useState)(!1),u=Object(o.a)(l,2),s=u[0],d=u[1],f=function(){n(),d(!1)},E=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J(t.name,t.password,i);case 3:f(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),d(!0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement(me.a,{open:t,onClose:f,centered:!1,size:"tiny",closeIcon:!0},c.a.createElement(me.a.Header,null,"Login"),c.a.createElement(me.a.Content,null,c.a.createElement(he,{onSubmit:E,onCancel:f,loginFailed:s})))},ge=function(){var e=ie(),t=Object(o.a)(e,2),n=t[0].user,a=t[1],i=Object(r.useState)(!1),l=Object(o.a)(i,2),u=l[0],s=l[1];return Object(r.useEffect)((function(){!function(e){var t=window.localStorage.getItem("loggedShoppingListAppUser");t&&e({type:"SET_USER",payload:{user:JSON.parse(t)}})}(a)}),[]),c.a.createElement(r.Fragment,null,n?c.a.createElement(d.a.Item,{type:"button",onClick:function(){!function(e){window.localStorage.removeItem("loggedShoppingListAppUser"),U.setToken(""),e({type:"DISCARD_USER"})}(a),a({type:"CLOSE_PROFILE_PAGE"})},color:"grey"},"Logout"):c.a.createElement(d.a.Item,{type:"button",onClick:function(){return s(!0)},color:"grey"},"Login"),c.a.createElement(Oe,{open:u,onClose:function(){return s(!1)}}))},we=function(e){var t=e.onSubmit,n=e.onCancel,a=e.registerFailed;return c.a.createElement(Ee.d,{initialValues:{name:"",email:"",password:""},onSubmit:t,validate:function(e){var t={};return e.name||(t.name="Field is required"),e.email&&!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)&&(t.email="Invalid email address"),e.password||(t.password="Field is required"),t}},(function(e){var t=e.isValid,r=e.dirty;return c.a.createElement(Ee.c,{className:"form ui"},c.a.createElement(Ee.b,{label:"Username",placeholder:"Username",name:"name",component:ve,autoFocus:!0}),c.a.createElement(Ee.b,{label:"Password",placeholder:"Password",name:"password",component:ye}),c.a.createElement(Ee.b,{label:"Email",placeholder:"Optional email adress. Can be added later in account settings",name:"email",component:ve}),a&&c.a.createElement(pe.a,{negative:!0},c.a.createElement("p",null,"Username already taken.")),c.a.createElement(de.a,null,c.a.createElement(de.a.Column,{floated:"left",width:5},c.a.createElement(fe.a,{type:"button",onClick:n,color:"red"},"Cancel")),c.a.createElement(de.a.Column,{floated:"right",width:5},c.a.createElement(fe.a,{type:"submit",floated:"right",color:"green",disabled:!r||!t},"Confirm"))))}))},je=function(e){var t=e.open,n=e.onClose,a=ie(),i=Object(o.a)(a,2)[1],l=Object(r.useState)(!1),u=Object(o.a)(l,2),s=u[0],d=u[1],f=function(){n(),d(!1)},E=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q(t.name,t.email,t.password,i);case 3:n(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),d(!0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement(me.a,{open:t,onClose:f,centered:!1,size:"tiny",closeIcon:!0},c.a.createElement(me.a.Header,null,"Register"),c.a.createElement(me.a.Content,null,c.a.createElement(we,{onSubmit:E,onCancel:f,registerFailed:s})))},Ce=function(){var e=ie(),t=Object(o.a)(e,1)[0].user,n=Object(r.useState)(!1),a=Object(o.a)(n,2),i=a[0],l=a[1];return c.a.createElement(r.Fragment,null,t?null:c.a.createElement(d.a.Item,{type:"button",onClick:function(){return l(!0)},color:"grey"},"Register"),c.a.createElement(je,{open:i,onClose:function(){return l(!1)}}))},xe=function(){var e=ie(),t=Object(o.a)(e,2),n=t[0],a=n.user,r=n.isDesktop,i=t[1];return r?c.a.createElement(d.a,{borderless:!0,inverted:!0,size:"massive"},c.a.createElement(se.a,null,c.a.createElement(d.a.Item,{position:"left",header:!0},c.a.createElement(f.a,{name:"list alternate outline",size:"large"}),"Shopping List"),c.a.createElement(d.a.Menu,{position:"right"},a&&c.a.createElement(ue,null),a&&c.a.createElement(d.a.Item,{type:"button",onClick:function(){return i({type:"OPEN_PROFILE_PAGE"})},color:"grey"},c.a.createElement(f.a,{name:"user",size:"large"}),a.name),c.a.createElement(ge,null),c.a.createElement(Ce,null)))):c.a.createElement(d.a,{borderless:!0,inverted:!0,size:"huge"},c.a.createElement(se.a,null,c.a.createElement(d.a.Item,{header:!0,className:"mobile-logo"},c.a.createElement(f.a,{name:"list alternate outline",size:"large"}),"Shopping List"),c.a.createElement(oe.a,{item:!0,text:"Menu",className:"mobile-menu"},c.a.createElement(oe.a.Menu,null,a&&c.a.createElement(ue,null),a&&c.a.createElement(oe.a.Item,{type:"button",onClick:function(){return i({type:"OPEN_PROFILE_PAGE"})},color:"grey"},c.a.createElement(f.a,{name:"user",size:"large"}),a.name),c.a.createElement(ge,null),c.a.createElement(Ce,null)))))},Ie=n(464),Se=n(453),ke=n(463),Le=function(e){var t=e.open,n=e.onConfirm,a=e.onClose,r=e.list;return c.a.createElement(me.a,{open:t,onClose:a,centered:!1,size:"tiny",closeIcon:!0},c.a.createElement(me.a.Header,null,"Really delete list ",r.name,"?"),c.a.createElement(me.a.Content,null,c.a.createElement(de.a,null,c.a.createElement(de.a.Column,{floated:"left",width:5},c.a.createElement(fe.a,{type:"button",onClick:n,color:"red"},"Yes")),c.a.createElement(de.a.Column,{floated:"right",width:5},c.a.createElement(fe.a,{floated:"right",type:"button",onClick:a,color:"grey"},"No")))))},Te=function(e){var t=e.onSubmit;return c.a.createElement(Ee.d,{initialValues:{name:""},onSubmit:t},(function(e){var t=e.isValid,n=e.dirty;return c.a.createElement(Ee.c,{className:"form ui"},c.a.createElement(Ee.b,{label:"Invite a user",placeholder:"Name",name:"name",component:ve}),c.a.createElement(de.a,null,c.a.createElement(de.a.Column,{floated:"left",width:5},c.a.createElement(fe.a,{type:"submit",floated:"left",color:"green",disabled:!n||!t},"Invite"))))}))},_e=function(e){var t=e.list,n=ie(),a=Object(o.a)(n,2),i=a[0].user,l=a[1],u=function(){var e=Object(p.a)(m.a.mark((function e(n){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.uninviteGuest(t.id,n.id);case 3:a=e.sent,l($(a)),i&&z(a,i,l),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();if(!t)return null;var s={padding:"7px 7px 7px 14px"};return 0===t.invitedGuests.length?c.a.createElement(r.Fragment,null,c.a.createElement("label",{style:{fontWeight:"bold"}},"Invitations"),c.a.createElement("p",{style:{fontSize:"1rem"}},"List has no pending invitations.")):c.a.createElement(r.Fragment,null,c.a.createElement("label",{style:{fontWeight:"bold"}},"Invitations"),t.invitedGuests.map((function(e){return c.a.createElement(ke.a,{key:e.id},c.a.createElement(de.a,null,c.a.createElement(de.a.Column,{style:s,floated:"left",verticalAlign:"middle",width:5},c.a.createElement("span",null,e.name)),c.a.createElement(de.a.Column,{style:s,floated:"right",width:5},c.a.createElement(fe.a,{floated:"right",size:"mini",color:"red",onClick:function(){return u(e)},icon:"delete"}))))})))},Ae=function(e){var t=e.list,n=e.isGuest,a=ie(),i=Object(o.a)(a,2),l=i[0].user,u=i[1],s=function(){var e=Object(p.a)(m.a.mark((function e(n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{ee(t,n,u)}catch(a){console.log(a)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(!t)return null;var d={padding:"7px 7px 7px 14px"},f={fontSize:"1rem"},E={fontSize:"1rem",fontWeight:"bold"};return l?0===t.guests.length?c.a.createElement(r.Fragment,null,c.a.createElement("label",{style:{fontWeight:"bold"}},"Guests"),c.a.createElement("p",{style:f},"List has no guest users.")):n?c.a.createElement(r.Fragment,null,c.a.createElement("label",{style:{fontWeight:"bold"}},"Guests"),t.guests.map((function(e){return c.a.createElement(ke.a,{size:"mini",key:e.id},c.a.createElement("span",{style:e.id===l.id?E:f},e.name))}))):c.a.createElement(r.Fragment,null,c.a.createElement("label",{style:{fontWeight:"bold"}},"Guests"),t.guests.map((function(e){return c.a.createElement(ke.a,{key:e.id},c.a.createElement(de.a,null,c.a.createElement(de.a.Column,{style:d,floated:"left",verticalAlign:"middle",width:5},c.a.createElement("span",null,e.name)),c.a.createElement(de.a.Column,{style:d,floated:"right",width:5},c.a.createElement(fe.a,{floated:"right",size:"mini",color:"red",onClick:function(){return s(e)},icon:"delete"}))))}))):null},Ne=function(e){var t=e.open,n=e.onClose,a=e.list,i=Object(r.useState)(!1),l=Object(o.a)(i,2),u=l[0],s=l[1],d=ie(),E=Object(o.a)(d,2),b=E[0].user,v=E[1],y=function(){var e=Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(!1),n();try{M(a,v)}catch(t){console.log(t)}case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(p.a)(m.a.mark((function e(t,n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.guests.map((function(e){return e.name})).includes(t.name)&&!a.invitedGuests.map((function(e){return e.name})).includes(t.name)){e.next=2;break}return e.abrupt("return",n.setErrors({name:"User is already invited to the list."}));case 2:return e.prev=2,e.next=5,U.inviteGuest(a.id,t.name);case 5:r=e.sent,v(K(r)),b&&z(r,b,v),n.resetForm(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),n.setErrors({name:"User does not exist."});case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,n){return e.apply(this,arguments)}}(),O=function(){var e=Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{b&&(X(a,v),Z(b,v),n())}catch(t){console.log(t)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(b){if(a.guests.map((function(e){return e.id})).includes(b.id))return c.a.createElement(me.a,{open:t,onClose:n,centered:!1,size:"small",closeIcon:!0},c.a.createElement(me.a.Header,null,"Configure list ",a.name),c.a.createElement(me.a.Content,null,c.a.createElement(r.Fragment,null,c.a.createElement("label",{style:{fontWeight:"bold"}},"Owner of the list"),c.a.createElement(ke.a,{size:"mini"},c.a.createElement("span",{style:{fontSize:"1rem"}},a.user.name)),c.a.createElement(Se.a,null),c.a.createElement(Ae,{list:a,isGuest:!0}),c.a.createElement(Se.a,null)),c.a.createElement(fe.a,{color:"orange",onClick:O},c.a.createElement(f.a,{name:"delete"}),"Leave list"),c.a.createElement(Le,{open:u,list:a,onConfirm:y,onClose:function(){return s(!1)}})),c.a.createElement(me.a.Actions,null,c.a.createElement(fe.a,{type:"button",onClick:n,color:"grey"},"Cancel")));if(a.user.id===b.id)return c.a.createElement(me.a,{open:t,onClose:n,centered:!1,size:"small",closeIcon:!0},c.a.createElement(me.a.Header,null,"Configure list ",a.name),c.a.createElement(me.a.Content,null,c.a.createElement(r.Fragment,null,c.a.createElement("label",{style:{fontWeight:"bold"}},"Owner of the list"),c.a.createElement(ke.a,{size:"mini"},c.a.createElement("span",{style:{fontSize:"1rem",fontWeight:"bold"}},a.user.name)),c.a.createElement(Se.a,null),c.a.createElement(Ae,{list:a,isGuest:!1}),c.a.createElement(Se.a,null),c.a.createElement(_e,{list:a}),c.a.createElement(Se.a,null),c.a.createElement(Te,{onSubmit:h}),c.a.createElement(Se.a,null)),c.a.createElement(fe.a,{color:"red",onClick:function(){return s(!0)}},c.a.createElement(f.a,{name:"delete"}),"Delete list"),c.a.createElement(Le,{open:u,list:a,onConfirm:y,onClose:function(){return s(!1)}})),c.a.createElement(me.a.Actions,null,c.a.createElement(fe.a,{type:"button",onClick:n,color:"grey"},"Cancel")))}return console.log(b),console.log(a),c.a.createElement(me.a,{open:t,onClose:n,centered:!1,size:"small",closeIcon:!0},c.a.createElement(me.a.Header,null,"Login to edit the list"),c.a.createElement(me.a.Actions,null,c.a.createElement(fe.a,{type:"button",onClick:n,color:"grey"},"Cancel")))},Ue=function(e){var t=e.onSubmit,n=e.onCancel;return c.a.createElement(Ee.d,{initialValues:{name:""},onSubmit:t,validate:function(e){var t={};return e.name||(t.name="Field is required"),t}},(function(e){var t=e.isValid,a=e.dirty;return c.a.createElement(Ee.c,{className:"form ui"},c.a.createElement(Ee.b,{label:"Name of the item",placeholder:"Item",name:"name",component:ve,autoFocus:!0}),c.a.createElement(de.a,null,c.a.createElement(de.a.Column,{floated:"left",width:5},c.a.createElement(fe.a,{type:"button",onClick:n,color:"red"},"Cancel")),c.a.createElement(de.a.Column,{floated:"right",width:5},c.a.createElement(fe.a,{type:"submit",floated:"right",color:"green",disabled:!a||!t},"Add"))))}))},De=function(e){var t=e.open,n=e.onClose,a=e.list,r=ie(),i=Object(o.a)(r,2)[1],l=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{H(a,t.name,i)}catch(r){console.error(r)}n();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement(me.a,{open:t,onClose:n,centered:!1,size:"tiny",closeIcon:!0},c.a.createElement(me.a.Header,null,"Add item"),c.a.createElement(me.a.Content,null,c.a.createElement(Ue,{onSubmit:l,onCancel:n})))},Ve=function(e){var t=e.onSubmit,n=e.onCancel,a=e.item;return c.a.createElement(Ee.d,{initialValues:{name:a?a.name:""},onSubmit:t,validate:function(e){var t={};return e.name||(t.name="Field is required"),t}},(function(e){var t=e.isValid,a=e.dirty;return c.a.createElement(Ee.c,{className:"form ui"},c.a.createElement(Ee.b,{label:"Name of the item",placeholder:"Name",name:"name",component:ve}),c.a.createElement(de.a,null,c.a.createElement(de.a.Column,{floated:"left",width:5},c.a.createElement(fe.a,{type:"button",onClick:n,color:"red"},"Cancel")),c.a.createElement(de.a.Column,{floated:"right",width:5},c.a.createElement(fe.a,{type:"submit",floated:"right",color:"green",disabled:!a||!t},"Confirm"))))}))},Re=function(e){var t=e.open,n=e.onClose,a=e.item,r=e.list,i=ie(),l=Object(o.a)(i,2)[1],u=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{a&&B(r,a,t.name,l)}catch(c){console.error(c)}n();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement(me.a,{open:t,onClose:n,centered:!1,size:"tiny",closeIcon:!0},c.a.createElement(me.a.Header,null,"Edit item"),c.a.createElement(me.a.Content,null,c.a.createElement(Ve,{onSubmit:u,onCancel:n,item:a})))},Fe=n(80),ze=function(e){var t=e.item,n=e.onRemove,a=e.onEdit,r=e.index,i=ie(),l=Object(o.a)(i,1)[0].isDesktop;return c.a.createElement(Fe.b,{draggableId:t.id,index:r},(function(e){return c.a.createElement("div",Object.assign({},e.draggableProps,e.dragHandleProps,{ref:e.innerRef}),c.a.createElement(ke.a,null,c.a.createElement(de.a,null,c.a.createElement(de.a.Column,{floated:"left",verticalAlign:"middle",width:5},c.a.createElement("span",null,t.name)),c.a.createElement(de.a.Column,{floated:"right",width:10,className:l?"":"item-button-container-mobile"},c.a.createElement(fe.a,{floated:"right",size:"tiny",color:"red",onClick:n,icon:!0},c.a.createElement(f.a,{name:"delete"})),c.a.createElement(fe.a,{floated:"right",size:"tiny",color:"olive",onClick:a,icon:!0},c.a.createElement(f.a,{name:"edit"}))))))}))},Pe=function(){var e=Object(r.useState)(!1),t=Object(o.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)(null),l=Object(o.a)(i,2),u=l[0],s=l[1],d=Object(r.useState)(!1),b=Object(o.a)(d,2),v=b[0],y=b[1],h=ie(),O=Object(o.a)(h,2),g=O[0],w=g.activeList,j=g.isDesktop,C=O[1],x=Object(r.useRef)(null),I=function(){x&&x.current&&x.current.focus()};Object(r.useEffect)((function(){I()}),[w]);var S=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w)try{W(w,t,C)}catch(n){console.error(n)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(p.a)(m.a.mark((function e(t){var n,a,r,c,i,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.destination,a=t.source,r=t.draggableId,n){e.next=3;break}return e.abrupt("return");case 3:if(n.droppableId!==a.droppableId||n.index!==a.index){e.next=5;break}return e.abrupt("return");case 5:if((c=null===w||void 0===w?void 0:w.items)&&w){i=Object(E.a)(c),(l=i.find((function(e){return e.id===r})))&&(i.splice(a.index,1),i.splice(n.index,0,l),w.items=i);try{G(w,i,C)}catch(o){console.error(o)}}case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return w&&w.items?c.a.createElement(se.a,{className:j?"cont-style":"cont-style-mobile"},c.a.createElement(Ie.a,{as:"h3",style:{paddingRight:"1rem",marginBottom:0}},w.name),c.a.createElement(Se.a,null),0===w.items.length?"List has no items":c.a.createElement(Fe.a,{onDragEnd:k},c.a.createElement(Fe.c,{droppableId:w.id},(function(e){return c.a.createElement("div",Object.assign({ref:e.innerRef},e.droppableProps),w.items.map((function(e,t){return c.a.createElement(ze,{index:t,key:e.id,item:e,onRemove:function(){return S(e)},onEdit:function(){return s(e)}})})),e.placeholder)}))),c.a.createElement(Ne,{open:n,onClose:function(){return a(!1)},list:w}),c.a.createElement(De,{open:v,onClose:function(){y(!1),I()},list:w}),c.a.createElement(Re,{open:!!u,onClose:function(){return s(null)},list:w,item:u}),c.a.createElement(Se.a,null),c.a.createElement(fe.a,{floated:"left",color:"olive",onClick:function(){return a(!0)}},c.a.createElement(f.a,{name:"edit"}),"Edit"),c.a.createElement(fe.a,{color:"green",floated:"right",onClick:function(){return y(!0)},ref:x},c.a.createElement(f.a,{name:"add"}),"Add Item")):null},Ge=function(e){var t=e.onSubmit,n=e.onCancel,a=ie(),r=Object(o.a)(a,1)[0].lists;return c.a.createElement(Ee.d,{initialValues:{name:""},onSubmit:t,validate:function(e){var t={};return e.name||(t.name="Field is required"),r.map((function(e){return e.name})).includes(e.name)&&(t.name="List with that name already exists"),t}},(function(e){var t=e.isValid,a=e.dirty;return c.a.createElement(Ee.c,{className:"form ui"},c.a.createElement(Ee.b,{label:"Name of the list",placeholder:"Name",name:"name",component:ve,autoFocus:!0}),c.a.createElement(de.a,null,c.a.createElement(de.a.Column,{floated:"left",width:5},c.a.createElement(fe.a,{type:"button",onClick:n,color:"red"},"Cancel")),c.a.createElement(de.a.Column,{floated:"right",width:5},c.a.createElement(fe.a,{type:"submit",floated:"right",color:"green",disabled:!a||!t},"Add"))))}))},Me=function(){var e=ie(),t=Object(o.a)(e,2),n=t[0],a=n.listModalOpen,r=n.user,i=t[1],l=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i({type:"CLOSE_LIST_MODAL"});try{r&&P(t.name,r,i)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement(me.a,{open:a,onClose:function(){return i({type:"CLOSE_LIST_MODAL"})},centered:!1,size:"tiny",closeIcon:!0},c.a.createElement(me.a.Header,null,"Add a new list"),c.a.createElement(me.a.Content,null,c.a.createElement(Ge,{onSubmit:l,onCancel:function(){return i({type:"CLOSE_LIST_MODAL"})}})))},He=n(458),We=function(e){var t=e.onSubmit,n=e.onCancel,a=e.label,r=e.placeHolder,i=e.validate,l=e.initialValue;return c.a.createElement(Ee.d,{initialValues:{name:l},onSubmit:t,validate:i},(function(e){var t=e.isValid,i=e.dirty;return c.a.createElement(Ee.c,{className:"form ui"},c.a.createElement(Ee.b,{label:a,placeholder:r,name:"name",component:ve,autoFocus:!0}),c.a.createElement(de.a,null,c.a.createElement(de.a.Column,{floated:"left",width:5},c.a.createElement(fe.a,{type:"button",onClick:n,color:"red"},"Cancel")),c.a.createElement(de.a.Column,{floated:"right",width:5},c.a.createElement(fe.a,{type:"submit",floated:"right",color:"green",disabled:!i||!t},"Ok"))))}))},Be=function(e){var t=e.open,n=e.onSubmit,a=e.onClose,r=e.label,i=e.header,l=e.placeHolder,o=e.validate,u=e.initialValue;return c.a.createElement(me.a,{open:t,onClose:a,centered:!1,size:"tiny",closeIcon:!0},c.a.createElement(me.a.Header,null,i),c.a.createElement(me.a.Content,null,c.a.createElement(We,{onSubmit:n,onCancel:a,label:r,placeHolder:l,validate:o,initialValue:u})))},Je=function(e){var t=e.user,n=ie(),a=Object(o.a)(n,2)[1],i=Object(r.useState)(!1),l=Object(o.a)(i,2),u=l[0],s=l[1],d=function(){var e=Object(p.a)(m.a.mark((function e(n,r){var c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=12;break}return e.prev=1,e.next=4,D.changeName(t.id,n.name);case 4:c=e.sent,te(c,a),s(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),r.setErrors({name:"Username already taken."});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}();return t?c.a.createElement(He.a.Row,null,c.a.createElement(He.a.Cell,{width:2},"Username"),c.a.createElement(He.a.Cell,null,t.name),c.a.createElement(He.a.Cell,{textAlign:"right"},c.a.createElement(fe.a,{color:"olive",size:"mini",onClick:function(){return s(!0)}},c.a.createElement(f.a,{name:"edit"}),"Edit")),c.a.createElement(Be,{open:u,onSubmit:d,onClose:function(){return s(!1)},label:"Enter new name",header:"Change username",placeHolder:"Name",validate:void 0,initialValue:t.name})):null},qe=function(e){var t=e.user,n=ie(),a=Object(o.a)(n,2)[1],i=Object(r.useState)(!1),l=Object(o.a)(i,2),u=l[0],s=l[1],d=function(){var e=Object(p.a)(m.a.mark((function e(n,r){var c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=12;break}return e.prev=1,e.next=4,D.changeEmail(t.id,n.name);case 4:c=e.sent,ne(c,a),s(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),r.setErrors({name:"Email adress already in use."});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}();return t?c.a.createElement(He.a.Row,null,c.a.createElement(He.a.Cell,{width:2},"Email"),c.a.createElement(He.a.Cell,null,t.email?t.email:""),c.a.createElement(He.a.Cell,{textAlign:"right"},c.a.createElement(fe.a,{color:"olive",size:"mini",onClick:function(){return s(!0)}},c.a.createElement(f.a,{name:"edit"}),"Edit")),c.a.createElement(Be,{open:u,onSubmit:d,onClose:function(){return s(!1)},label:"Email adress",header:"Change email",placeHolder:"Email",validate:function(e){var t={};return e.name&&!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.name)&&(t.name="Invalid email address"),t},initialValue:t.email?t.email:""})):null},Ze=function(e){var t=e.user,n=ie(),a=Object(o.a)(n,2)[1],i=Object(r.useState)(),l=Object(o.a)(i,2),u=l[0],s=l[1];Object(r.useEffect)((function(){s(t.listInvitations)}),[t]);var d=function(){var e=Object(p.a)(m.a.mark((function e(n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=4;break}return e.next=3,Q(n,t,a);case 3:a({type:"CLOSE_PROFILE_PAGE"});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(!t||!u)return null;return c.a.createElement(r.Fragment,null,c.a.createElement(Se.a,{style:{padding:"1rem 0 1rem 0"},horizontal:!0},c.a.createElement(Ie.a,{as:"h4"},"List Invitations")),u&&0===u.length?c.a.createElement("p",{style:{paddingBottom:"1.3rem"}},"No new invitations."):c.a.createElement(He.a,null,c.a.createElement(He.a.Body,null,u&&u.map((function(e){return c.a.createElement(He.a.Row,{key:e.id},c.a.createElement(He.a.Cell,null,e.name," by ",e.user.name),c.a.createElement(He.a.Cell,{textAlign:"right"},c.a.createElement(fe.a,{positive:!0,size:"mini",onClick:function(){return d(e)}},c.a.createElement(f.a,{name:"check"}),"Accept"),c.a.createElement(fe.a,{negative:!0,size:"mini",onClick:function(){return n=e,void(t&&Y(n,t,a));var n}},c.a.createElement(f.a,{name:"delete"}),"Decline")))})))))},Ke=function(){var e=ie(),t=Object(o.a)(e,2),n=t[0],a=n.user,i=n.profilePageOpen,l=t[1],u=Object(r.useState)(),s=Object(o.a)(u,2),d=s[0],f=s[1];return Object(r.useEffect)((function(){i&&l({type:"CLEAR_ACTIVE_LIST"})}),[l,i]),Object(r.useEffect)((function(){(function(){var e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=5;break}return e.next=3,D.getUser(a.id);case 3:t=e.sent,f(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[a]),a&&d?c.a.createElement(se.a,{style:{padding:"0 4.6rem"}},c.a.createElement(Se.a,{style:{padding:"1rem 0 1rem 0"},horizontal:!0},c.a.createElement(Ie.a,{as:"h4"},"Account information")),c.a.createElement(He.a,{definition:!0},c.a.createElement(He.a.Body,null,c.a.createElement(Je,{user:d}),c.a.createElement(qe,{user:d}))),c.a.createElement(Ze,{user:d})):null},$e=function(){var e=ie(),t=Object(o.a)(e,2),n=t[0],a=n.user,i=n.profilePageOpen,l=t[1],s=Object(u.useMediaQuery)({minDeviceWidth:900},void 0,(function(e){l(V(e))}));Object(r.useEffect)((function(){l(V(s))}),[l,s]);var m={padding:"0 4.6rem"},p={marginTop:"4rem",textAlign:"center"};return c.a.createElement("div",null,c.a.createElement(xe,null),c.a.createElement(se.a,null,a?i?c.a.createElement(Ke,null):c.a.createElement(Pe,null):c.a.createElement(se.a,{style:m},c.a.createElement(Ie.a,{as:"h2",style:p},"Please login to use the site.")),c.a.createElement(Me,null)))};n(443);l.a.render(c.a.createElement(ce,{reducer:function(e,t){switch(t.type){case"SET_DEVICE_TO_DESKTOP":return Object(b.a)(Object(b.a)({},e),{},{isDesktop:t.payload});case"SET_LISTS":return Object(b.a)(Object(b.a)({},e),{},{lists:t.payload});case"SET_ACTIVE_LIST":return Object(b.a)(Object(b.a)({},e),{},{activeList:t.payload});case"CLEAR_ACTIVE_LIST":return Object(b.a)(Object(b.a)({},e),{},{activeList:null});case"OPEN_LIST_MODAL":return Object(b.a)(Object(b.a)({},e),{},{listModalOpen:!0});case"CLOSE_LIST_MODAL":return Object(b.a)(Object(b.a)({},e),{},{listModalOpen:!1});case"ADD_LIST":return Object(b.a)(Object(b.a)({},e),{},{lists:[].concat(Object(E.a)(e.lists),[t.payload])});case"EDIT_LIST":return Object(b.a)(Object(b.a)({},e),{},{activeList:t.payload});case"DELETE_LIST":return Object(b.a)(Object(b.a)({},e),{},{lists:e.lists.filter((function(e){return e.id!==t.payload.id})),activeList:null});case"ADD_ITEM":return t.payload.list.items.push(t.payload.item),Object(b.a)(Object(b.a)({},e),{},{lists:e.lists.map((function(e){return e.id===t.payload.list.id?t.payload.list:e}))});case"DELETE_ITEM":return t.payload.list.items=t.payload.list.items.filter((function(e){return e.id!==t.payload.item.id})),Object(b.a)(Object(b.a)({},e),{},{lists:e.lists.map((function(e){return e.id===t.payload.list.id?t.payload.list:e}))});case"EDIT_ITEM":return t.payload.list.items=t.payload.list.items.map((function(e){return e.id===t.payload.editedItem.id?t.payload.editedItem:e})),Object(b.a)(Object(b.a)({},e),{},{lists:e.lists.map((function(e){return e.id===t.payload.list.id?t.payload.list:e}))});case"SET_USER":return window.localStorage.setItem("loggedShoppingListAppUser",JSON.stringify(t.payload.user)),U.setToken(t.payload.user.token),Object(b.a)(Object(b.a)({},e),{},{user:t.payload.user});case"DISCARD_USER":return Object(b.a)(Object(b.a)({},e),{},{user:null});case"OPEN_PROFILE_PAGE":return Object(b.a)(Object(b.a)({},e),{},{profilePageOpen:!0});case"CLOSE_PROFILE_PAGE":return Object(b.a)(Object(b.a)({},e),{},{profilePageOpen:!1});case"INVITE_GUEST":case"UNINVITE_GUEST":return Object(b.a)(Object(b.a)({},e),{},{lists:e.lists.map((function(e){return e.id===t.payload.list.id?t.payload.list:e}))});case"ACCEPT_INVITATION":return Object(b.a)(Object(b.a)({},e),{},{lists:e.lists.map((function(e){return e.id===t.payload.list.id?t.payload.list:e})),user:Object(b.a)(Object(b.a)({},e.user),{},{listInvitations:t.payload.user.listInvitations})});case"DECLINE_INVITATION":return Object(b.a)(Object(b.a)({},e),{},{user:Object(b.a)(Object(b.a)({},e.user),{},{listInvitations:t.payload.user.listInvitations})});case"LEAVE_LIST":return Object(b.a)(Object(b.a)({},e),{},{lists:e.lists.map((function(e){return e.id===t.payload.list.id?t.payload.list:e}))});case"REMOVE_GUEST":return Object(b.a)(Object(b.a)({},e),{},{lists:e.lists.map((function(e){return e.id===t.payload.list.id?t.payload.list:e})),activeList:t.payload.list});case"CHANGE_USER_NAME":case"CHANGE_USER_EMAIL":return Object(b.a)(Object(b.a)({},e),{},{user:t.payload.user});default:return e}}},c.a.createElement($e,null)),document.getElementById("root"))}},[[260,1,2]]]);
//# sourceMappingURL=main.90a6e038.chunk.js.map