(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{271:function(e,t,a){e.exports=a(456)},455:function(e,t,a){},456:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),l=a(42),i=a.n(l),o=a(11),s=a(57),u=a(24),m=a(235),d=a(4),p=a.n(d),f=a(9),E=a(473),v=a(79),b=a(125),y=a(12),h=a(22),g=a.n(h),w=null,O=function(){return{headers:{Authorization:w}}},C=function(){var e=Object(f.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("".concat("/api","/lists"),O());case 2:return t=e.sent,a=t.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(f.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("".concat("/api","/lists"),{name:t},O());case 2:return a=e.sent,n=a.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(f.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.put("".concat("/api","/lists/").concat(t,"/update"),{items:a},O());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),S=function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.delete("".concat("/api","/lists/").concat(t),O());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(f.a)(p.a.mark((function e(t,a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("".concat("/api","/lists/").concat(t,"/add-item"),{name:a},O());case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),I=function(){var e=Object(f.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.delete("".concat("/api","/lists/").concat(t,"/delete-item/").concat(a),O());case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),L=function(){var e=Object(f.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.patch("".concat("/api","/lists/").concat(t,"/edit-item"),{item:a},O());case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),T=function(){var e=Object(f.a)(p.a.mark((function e(t,a){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("".concat("/api","/lists/").concat(t,"/invite-guest"),{guestName:a},O());case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),A=function(){var e=Object(f.a)(p.a.mark((function e(t,a){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("".concat("/api","/lists/").concat(t,"/uninvite-guest"),{guestId:a},O());case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),_=function(){var e=Object(f.a)(p.a.mark((function e(t,a){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("".concat("/api","/lists/").concat(t,"/accept-invite"),{user:a},O());case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),N=function(){var e=Object(f.a)(p.a.mark((function e(t,a){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("".concat("/api","/lists/").concat(t,"/decline-invite"),{user:a},O());case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),D=function(){var e=Object(f.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("".concat("/api","/lists/").concat(t,"/leave-list"),{},O());case 2:return a=e.sent,n=a.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(f.a)(p.a.mark((function e(t,a){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("".concat("/api","/lists/").concat(t,"/remove-guest"),{guestId:a},O());case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),R={config:O,setToken:function(e){w="bearer ".concat(e)},getListsByUser:C,addList:j,addItem:k,deleteItem:I,editItem:L,deleteList:S,editList:x,inviteGuest:T,uninviteGuest:A,acceptInvitation:_,declineInvitation:N,leaveList:D,removeGuest:M},V={login:function(){var e=Object(f.a)(p.a.mark((function e(t,a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("".concat("/api","/login"),{name:t,password:a});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),register:function(){var e=Object(f.a)(p.a.mark((function e(t,a,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("".concat("/api","/users"),{name:t,email:a,password:n});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),getUser:function(){var e=Object(f.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("".concat("/api","/users/").concat(t),R.config());case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getUserByEmail:function(){var e=Object(f.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("".concat("/api","/users/find-email/").concat(t),R.config());case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setActiveList:function(){var e=Object(f.a)(p.a.mark((function e(t,a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.patch("".concat("/api","/users/").concat(t,"/set-active-list"),{listId:a},R.config());case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),clearActiveList:function(){var e=Object(f.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.patch("".concat("/api","/users/").concat(t,"/clear-active-list"),{},R.config());case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),changeName:function(){var e=Object(f.a)(p.a.mark((function e(t,a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.patch("".concat("/api","/users/").concat(t,"/change-name"),{name:a},R.config());case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),changeEmail:function(){var e=Object(f.a)(p.a.mark((function e(t,a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.patch("".concat("/api","/users/").concat(t,"/change-email"),{email:a},R.config());case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),changePassword:function(){var e=Object(f.a)(p.a.mark((function e(t,a,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.patch("".concat("/api","/users/").concat(t,"/change-password"),{oldPassword:a,newPassword:n},R.config());case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),resetPassword:function(){var e=Object(f.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.patch("".concat("/api","/users/reset-password"),{email:t},R.config());case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},z=function(e){return{type:"SET_DEVICE_TO_DESKTOP",payload:e}},U=function(e){return{type:"SET_LISTS",payload:e}},F=function(){var e=Object(f.a)(p.a.mark((function e(t,a){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.getUser(t.id);case 2:n=e.sent,(r=n.activeList)&&(r.guests.map((function(e){return e.id})).includes(n.id)||r.user.id===n.id)&&a({type:"SET_ACTIVE_LIST",payload:r});case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),P=function(){var e=Object(f.a)(p.a.mark((function e(t,a,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.setActiveList(a.id,t.id);case 2:r=e.sent,n({type:"SET_ACTIVE_LIST",payload:r.activeList});case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),B=function(){var e=Object(f.a)(p.a.mark((function e(t,a,n){var r,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.addList(t);case 2:return r=e.sent,e.next=5,V.getUser(a.id);case 5:return c=e.sent,e.next=8,V.setActiveList(c.id,r.id);case 8:n({type:"ADD_LIST",payload:r}),n({type:"SET_ACTIVE_LIST",payload:r});case 10:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),H=function(){var e=Object(f.a)(p.a.mark((function e(t,a,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.editList(t.id,a);case 2:n({type:"EDIT_LIST",payload:t});case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),G=function(){var e=Object(f.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.deleteList(t.id);case 2:a({type:"DELETE_LIST",payload:t});case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),W=function(){var e=Object(f.a)(p.a.mark((function e(t,a,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.addItem(t.id,a);case 2:r=e.sent.data,n({type:"ADD_ITEM",payload:{list:t,item:r}});case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),J=function(){var e=Object(f.a)(p.a.mark((function e(t,a,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.deleteItem(t.id,a.id);case 2:n({type:"DELETE_ITEM",payload:{list:t,item:a}});case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),q=function(){var e=Object(f.a)(p.a.mark((function e(t,a,n,r){var c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(y.a)(Object(y.a)({},a),{},{name:n}),e.next=3,R.editItem(t.id,c);case 3:r({type:"EDIT_ITEM",payload:{list:t,editedItem:c}});case 4:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),Z=function(){var e=Object(f.a)(p.a.mark((function e(t,a,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.login(t,a);case 2:(r=e.sent)&&(n({type:"CLEAR_ACTIVE_LIST"}),n({type:"SET_USER",payload:{user:r}}));case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Y=function(){var e=Object(f.a)(p.a.mark((function e(t,a,n,r){var c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.register(t,a,n);case 2:return e.next=4,V.login(t,n);case 4:c=e.sent,r({type:"CLEAR_ACTIVE_LIST"}),r({type:"SET_USER",payload:{user:c}});case 7:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),$=function(){var e=Object(f.a)(p.a.mark((function e(t,a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.clearActiveList(t.id);case 2:return e.next=4,R.getListsByUser();case 4:n=e.sent,a({type:"CLEAR_ACTIVE_LIST"}),a({type:"SET_LISTS",payload:n});case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),K=function(e){return{type:"INVITE_GUEST",payload:{list:e}}},Q=function(e){return{type:"UNINVITE_GUEST",payload:{list:e}}},X=function(){var e=Object(f.a)(p.a.mark((function e(t,a,n){var r,c,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.acceptInvitation(t.id,a.id);case 2:return r=e.sent,e.next=5,R.getListsByUser();case 5:return c=e.sent,n({type:"ACCEPT_INVITATION",payload:{list:r,user:a}}),n({type:"SET_LISTS",payload:c}),e.next=10,V.setActiveList(a.id,r.id);case 10:l=e.sent,n({type:"SET_ACTIVE_LIST",payload:l.activeList});case 12:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),ee=function(){var e=Object(f.a)(p.a.mark((function e(t,a,n){var r,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.declineInvitation(t.id,a.id);case 2:return r=e.sent,e.next=5,V.getUser(a.id);case 5:c=e.sent,n({type:"DECLINE_INVITATION",payload:{list:r,user:c}});case 7:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),te=function(){var e=Object(f.a)(p.a.mark((function e(t,a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.leaveList(t.id);case 2:n=e.sent,a({type:"LEAVE_LIST",payload:{list:n}});case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ae=function(){var e=Object(f.a)(p.a.mark((function e(t,a,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.removeGuest(t.id,a.id);case 2:r=e.sent,n({type:"REMOVE_GUEST",payload:{list:r}});case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),ne=function(){var e=Object(f.a)(p.a.mark((function e(t,a){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a({type:"CHANGE_USER_NAME",payload:{user:t}}),(n=window.localStorage.getItem("loggedShoppingListAppUser"))&&((r=JSON.parse(n)).name=t.name,window.localStorage.setItem("loggedShoppingListAppUser",JSON.stringify(r)),a({type:"SET_USER",payload:{user:r}}));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),re=function(){var e=Object(f.a)(p.a.mark((function e(t,a){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a({type:"CHANGE_USER_EMAIL",payload:{user:t}}),(n=window.localStorage.getItem("loggedShoppingListAppUser"))&&((r=JSON.parse(n)).email=t.email,window.localStorage.setItem("loggedShoppingListAppUser",JSON.stringify(r)),a({type:"SET_USER",payload:{user:r}}));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ce=function(e){return{type:"SET_OPEN_MODAL_TYPE",payload:{modal:e}}};!function(e){e[e.None=0]="None",e[e.TestModal=1]="TestModal",e[e.LoginModal=2]="LoginModal",e[e.RegisterModal=3]="RegisterModal",e[e.RecoveryModal=4]="RecoveryModal"}(n||(n={}));var le={lists:[],activeList:null,listModalOpen:!1,user:null,modalType:n.None,isDesktop:!0},ie=Object(r.createContext)([le,function(){return le}]),oe=function(e){var t=e.reducer,a=e.children,n=Object(r.useReducer)(t,le),l=Object(o.a)(n,2),i=l[0],s=l[1];return c.a.createElement(ie.Provider,{value:[i,s]},a)},se=function(){return Object(r.useContext)(ie)},ue=function(){var e=se(),t=Object(o.a)(e,2)[1];return c.a.createElement(E.a.Item,{name:"newList",as:"a",onClick:function(){return t({type:"OPEN_LIST_MODAL"})}},c.a.createElement(v.a,{name:"add",size:"tiny"}),"Add List")},me=a(469),de=function(){var e=se(),t=Object(o.a)(e,2),a=t[0],n=a.lists,l=a.activeList,i=a.user,s=a.isDesktop,m=t[1],d=Object(u.f)(),E=Object(u.g)();Object(r.useEffect)((function(){(function(){var e=Object(f.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.getListsByUser();case 3:t=e.sent,m(U(t)),i&&F(i,m),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[m]);var b=function(e){i&&(P(e,i,m),d.push("/list"))};if(0===n.length)return c.a.createElement(ue,null);return s?c.a.createElement(me.a,{item:!0,text:"/profile"!==E.pathname&&l?null===l||void 0===l?void 0:l.name:"Select list",style:{minWidth:"11rem"}},c.a.createElement(me.a.Menu,null,n.map((function(e){return c.a.createElement(me.a.Item,{key:e.id,onClick:function(){return b(e)}},l&&l.id===e.id?c.a.createElement(v.a,{name:"selected radio",size:"mini"}):c.a.createElement(v.a,{name:"circle outline",size:"mini"}),e.name)})),c.a.createElement(me.a.Divider,null),c.a.createElement(ue,null))):c.a.createElement(r.Fragment,null,c.a.createElement(me.a.Header,{text:"Lists",style:{minWidth:"11rem"}},"Lists"),n.map((function(e){return c.a.createElement(me.a.Item,{key:e.id,onClick:function(){return b(e)}},l&&l.id===e.id?c.a.createElement(v.a,{name:"selected radio",size:"mini"}):c.a.createElement(v.a,{name:"circle outline",size:"mini"}),e.name)})),c.a.createElement(ue,null),c.a.createElement(me.a.Divider,null))},pe=a(464),fe=function(){var e=se(),t=Object(o.a)(e,2),a=t[0].user,l=t[1],i=Object(u.f)();return Object(r.useEffect)((function(){!function(e){var t=window.localStorage.getItem("loggedShoppingListAppUser");t&&e({type:"SET_USER",payload:{user:JSON.parse(t)}})}(l)}),[]),c.a.createElement(r.Fragment,null,a?c.a.createElement(E.a.Item,{type:"button",onClick:function(){!function(e){window.localStorage.removeItem("loggedShoppingListAppUser"),R.setToken(""),e({type:"DISCARD_USER"})}(l),l(ce(n.None)),i.push("/")},color:"grey"},"Logout"):c.a.createElement(E.a.Item,{type:"button",onClick:function(){return l(ce(n.LoginModal))},color:"grey"},"Login"))},Ee=function(){var e=se(),t=Object(o.a)(e,2),a=t[0].user,l=t[1];return c.a.createElement(r.Fragment,null,a?null:c.a.createElement(E.a.Item,{type:"button",onClick:function(){return l(ce(n.RegisterModal))},color:"grey"},"Register"))},ve=function(){var e=se(),t=Object(o.a)(e,1)[0],a=t.user,n=t.isDesktop,r=Object(u.f)();return n?c.a.createElement(E.a,{borderless:!0,inverted:!0,size:"massive"},c.a.createElement(pe.a,null,c.a.createElement(E.a.Item,{position:"left",header:!0},c.a.createElement(v.a,{name:"list alternate outline",size:"large"}),"Shopping List"),c.a.createElement(E.a.Menu,{position:"right"},a&&c.a.createElement(de,null),a&&c.a.createElement(E.a.Item,{type:"button",onClick:function(){return r.push("/profile")},color:"grey"},c.a.createElement(v.a,{name:"user",size:"large"}),a.name),c.a.createElement(fe,null),c.a.createElement(Ee,null)))):c.a.createElement(E.a,{borderless:!0,inverted:!0,size:"huge"},c.a.createElement(pe.a,null,c.a.createElement(E.a.Item,{header:!0,className:"mobile-logo"},c.a.createElement(v.a,{name:"list alternate outline",size:"large"}),"Shopping List"),c.a.createElement(me.a,{item:!0,text:"Menu",className:"mobile-menu"},c.a.createElement(me.a.Menu,null,a&&c.a.createElement(de,null),a&&c.a.createElement(me.a.Item,{type:"button",onClick:function(){return r.push("/profile")},color:"grey"},c.a.createElement(v.a,{name:"user",size:"large"}),a.name),c.a.createElement(fe,null),c.a.createElement(Ee,null)))))},be=a(476),ye=a(465),he=a(472),ge=a(475),we=a(467),Oe=a(474),Ce=function(e){var t=e.open,a=e.onConfirm,n=e.onClose,r=e.list;return c.a.createElement(we.a,{open:t,onClose:n,centered:!1,size:"tiny",closeIcon:!0},c.a.createElement(we.a.Header,null,"Really delete list ",r.name,"?"),c.a.createElement(we.a.Content,null,c.a.createElement(Oe.a,null,c.a.createElement(Oe.a.Column,{floated:"left",width:5},c.a.createElement(he.a,{type:"button",onClick:a,color:"red"},"Yes")),c.a.createElement(Oe.a.Column,{floated:"right",width:5},c.a.createElement(he.a,{floated:"right",type:"button",onClick:n,color:"grey"},"No")))))},je=a(16),xe=a(466),Se=function(e){var t=e.field,a=e.label,n=e.placeholder,r=e.autoFocus;return c.a.createElement(xe.a.Field,null,c.a.createElement("label",null,a),c.a.createElement(je.b,Object.assign({placeholder:n},t,{autoFocus:r})),c.a.createElement("div",{style:{color:"red"}},c.a.createElement(je.a,{name:t.name})))},ke=function(e){var t=e.field,a=e.label,n=e.placeholder,r=e.autoFocus;return c.a.createElement(xe.a.Field,null,c.a.createElement("label",null,a),c.a.createElement(je.b,Object.assign({type:"password",placeholder:n},t,{autoFocus:r})),c.a.createElement("div",{style:{color:"red"}},c.a.createElement(je.a,{name:t.name})))},Ie=function(e){var t=e.field,a=e.type,n=e.checked,r=e.onChange;return c.a.createElement("label",null,c.a.createElement("input",Object.assign({},t,{type:a,checked:n,onChange:r})),t.name)},Le=function(e){var t=e.onSubmit;return c.a.createElement(je.d,{initialValues:{name:""},onSubmit:t},(function(e){var t=e.isValid,a=e.dirty;return c.a.createElement(je.c,{className:"form ui"},c.a.createElement(je.b,{label:"Invite a user",placeholder:"Name",name:"name",component:Se}),c.a.createElement(Oe.a,null,c.a.createElement(Oe.a.Column,{floated:"left",width:5},c.a.createElement(he.a,{type:"submit",floated:"left",color:"green",disabled:!a||!t},"Invite"))))}))},Te=function(e){var t=e.list,a=se(),n=Object(o.a)(a,2),l=n[0].user,i=n[1],s=function(){var e=Object(f.a)(p.a.mark((function e(a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.uninviteGuest(t.id,a.id);case 3:n=e.sent,i(Q(n)),l&&P(n,l,i),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();if(!t)return null;var u={padding:"7px 7px 7px 14px"};return 0===t.invitedGuests.length?c.a.createElement(r.Fragment,null,c.a.createElement("label",{style:{fontWeight:"bold"}},"Invitations"),c.a.createElement("p",{style:{fontSize:"1rem"}},"List has no pending invitations.")):c.a.createElement(r.Fragment,null,c.a.createElement("label",{style:{fontWeight:"bold"}},"Invitations"),t.invitedGuests.map((function(e){return c.a.createElement(ge.a,{key:e.id},c.a.createElement(Oe.a,null,c.a.createElement(Oe.a.Column,{style:u,floated:"left",verticalAlign:"middle",width:5},c.a.createElement("span",null,e.name)),c.a.createElement(Oe.a.Column,{style:u,floated:"right",width:5},c.a.createElement(he.a,{floated:"right",size:"mini",color:"red",onClick:function(){return s(e)},icon:"delete"}))))})))},Ae=function(e){var t=e.list,a=e.isGuest,n=se(),l=Object(o.a)(n,2),i=l[0].user,s=l[1],u=function(){var e=Object(f.a)(p.a.mark((function e(a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{ae(t,a,s)}catch(n){console.log(n)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(!t)return null;var m={padding:"7px 7px 7px 14px"},d={fontSize:"1rem"},E={fontSize:"1rem",fontWeight:"bold"};return i?0===t.guests.length?c.a.createElement(r.Fragment,null,c.a.createElement("label",{style:{fontWeight:"bold"}},"Guests"),c.a.createElement("p",{style:d},"List has no guest users.")):a?c.a.createElement(r.Fragment,null,c.a.createElement("label",{style:{fontWeight:"bold"}},"Guests"),t.guests.map((function(e){return c.a.createElement(ge.a,{size:"mini",key:e.id},c.a.createElement("span",{style:e.id===i.id?E:d},e.name))}))):c.a.createElement(r.Fragment,null,c.a.createElement("label",{style:{fontWeight:"bold"}},"Guests"),t.guests.map((function(e){return c.a.createElement(ge.a,{key:e.id},c.a.createElement(Oe.a,null,c.a.createElement(Oe.a.Column,{style:m,floated:"left",verticalAlign:"middle",width:5},c.a.createElement("span",null,e.name)),c.a.createElement(Oe.a.Column,{style:m,floated:"right",width:5},c.a.createElement(he.a,{floated:"right",size:"mini",color:"red",onClick:function(){return u(e)},icon:"delete"}))))}))):null},_e=function(e){var t=e.open,a=e.onClose,n=e.list,l=Object(r.useState)(!1),i=Object(o.a)(l,2),s=i[0],u=i[1],m=se(),d=Object(o.a)(m,2),E=d[0].user,b=d[1],y=function(){var e=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u(!1),a();try{G(n,b)}catch(t){console.log(t)}case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(f.a)(p.a.mark((function e(t,a){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.guests.map((function(e){return e.name})).includes(t.name)&&!n.invitedGuests.map((function(e){return e.name})).includes(t.name)){e.next=2;break}return e.abrupt("return",a.setErrors({name:"User is already invited to the list."}));case 2:return e.prev=2,e.next=5,R.inviteGuest(n.id,t.name);case 5:r=e.sent,b(K(r)),E&&P(r,E,b),a.resetForm(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),a.setErrors({name:"User does not exist."});case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,a){return e.apply(this,arguments)}}(),g=function(){var e=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{E&&(te(n,b),$(E,b),a())}catch(t){console.log(t)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(E){if(n.guests.map((function(e){return e.id})).includes(E.id))return c.a.createElement(we.a,{open:t,onClose:a,centered:!1,size:"small",closeIcon:!0},c.a.createElement(we.a.Header,null,"Configure list ",n.name),c.a.createElement(we.a.Content,null,c.a.createElement(r.Fragment,null,c.a.createElement("label",{style:{fontWeight:"bold"}},"Owner of the list"),c.a.createElement(ge.a,{size:"mini"},c.a.createElement("span",{style:{fontSize:"1rem"}},n.user.name)),c.a.createElement(ye.a,null),c.a.createElement(Ae,{list:n,isGuest:!0}),c.a.createElement(ye.a,null)),c.a.createElement(he.a,{color:"orange",onClick:g},c.a.createElement(v.a,{name:"delete"}),"Leave list"),c.a.createElement(Ce,{open:s,list:n,onConfirm:y,onClose:function(){return u(!1)}})),c.a.createElement(we.a.Actions,null,c.a.createElement(he.a,{type:"button",onClick:a,color:"grey"},"Cancel")));if(n.user.id===E.id)return c.a.createElement(we.a,{open:t,onClose:a,centered:!1,size:"small",closeIcon:!0},c.a.createElement(we.a.Header,null,"Configure list ",n.name),c.a.createElement(we.a.Content,null,c.a.createElement(r.Fragment,null,c.a.createElement("label",{style:{fontWeight:"bold"}},"Owner of the list"),c.a.createElement(ge.a,{size:"mini"},c.a.createElement("span",{style:{fontSize:"1rem",fontWeight:"bold"}},n.user.name)),c.a.createElement(ye.a,null),c.a.createElement(Ae,{list:n,isGuest:!1}),c.a.createElement(ye.a,null),c.a.createElement(Te,{list:n}),c.a.createElement(ye.a,null),c.a.createElement(Le,{onSubmit:h}),c.a.createElement(ye.a,null)),c.a.createElement(he.a,{color:"red",onClick:function(){return u(!0)}},c.a.createElement(v.a,{name:"delete"}),"Delete list"),c.a.createElement(Ce,{open:s,list:n,onConfirm:y,onClose:function(){return u(!1)}})),c.a.createElement(we.a.Actions,null,c.a.createElement(he.a,{type:"button",onClick:a,color:"grey"},"Cancel")))}return c.a.createElement(we.a,{open:t,onClose:a,centered:!1,size:"small",closeIcon:!0},c.a.createElement(we.a.Header,null,"Login to edit the list"),c.a.createElement(we.a.Actions,null,c.a.createElement(he.a,{type:"button",onClick:a,color:"grey"},"Cancel")))},Ne=function(e){var t=e.onSubmit,a=e.onCancel;return c.a.createElement(je.d,{initialValues:{name:""},onSubmit:t,validate:function(e){var t={};return e.name||(t.name="Field is required"),t}},(function(e){var t=e.isValid,n=e.dirty;return c.a.createElement(je.c,{className:"form ui"},c.a.createElement(je.b,{label:"Name of the item",placeholder:"Item",name:"name",component:Se,autoFocus:!0}),c.a.createElement(Oe.a,null,c.a.createElement(Oe.a.Column,{floated:"left",width:5},c.a.createElement(he.a,{type:"button",onClick:a,color:"red"},"Cancel")),c.a.createElement(Oe.a.Column,{floated:"right",width:5},c.a.createElement(he.a,{type:"submit",floated:"right",color:"green",disabled:!n||!t},"Add"))))}))},De=function(e){var t=e.open,a=e.onClose,n=e.list,r=se(),l=Object(o.a)(r,2)[1],i=function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{W(n,t.name,l)}catch(r){console.error(r)}a();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement(we.a,{open:t,onClose:a,centered:!1,size:"tiny",closeIcon:!0},c.a.createElement(we.a.Header,null,"Add item"),c.a.createElement(we.a.Content,null,c.a.createElement(Ne,{onSubmit:i,onCancel:a})))},Me=function(e){var t=e.onSubmit,a=e.onCancel,n=e.item;return c.a.createElement(je.d,{initialValues:{name:n?n.name:""},onSubmit:t,validate:function(e){var t={};return e.name||(t.name="Field is required"),t}},(function(e){var t=e.isValid,n=e.dirty;return c.a.createElement(je.c,{className:"form ui"},c.a.createElement(je.b,{label:"Name of the item",placeholder:"Name",name:"name",component:Se}),c.a.createElement(Oe.a,null,c.a.createElement(Oe.a.Column,{floated:"left",width:5},c.a.createElement(he.a,{type:"button",onClick:a,color:"red"},"Cancel")),c.a.createElement(Oe.a.Column,{floated:"right",width:5},c.a.createElement(he.a,{type:"submit",floated:"right",color:"green",disabled:!n||!t},"Confirm"))))}))},Re=function(e){var t=e.open,a=e.onClose,n=e.item,r=e.list,l=se(),i=Object(o.a)(l,2)[1],s=function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n&&q(r,n,t.name,i)}catch(c){console.error(c)}a();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement(we.a,{open:t,onClose:a,centered:!1,size:"tiny",closeIcon:!0},c.a.createElement(we.a.Header,null,"Edit item"),c.a.createElement(we.a.Content,null,c.a.createElement(Me,{onSubmit:s,onCancel:a,item:n})))},Ve=a(88),ze=function(e){var t=e.item,a=e.onRemove,n=e.onEdit,r=e.index,l=se(),i=Object(o.a)(l,1)[0].isDesktop;return c.a.createElement(Ve.b,{draggableId:t.id,index:r},(function(e){return c.a.createElement("div",Object.assign({},e.draggableProps,e.dragHandleProps,{ref:e.innerRef}),c.a.createElement(ge.a,null,c.a.createElement(Oe.a,null,c.a.createElement(Oe.a.Column,{floated:"left",verticalAlign:"middle",width:5},c.a.createElement("span",null,t.name)),c.a.createElement(Oe.a.Column,{floated:"right",width:10,className:i?"":"item-button-container-mobile"},c.a.createElement(he.a,{floated:"right",size:"tiny",color:"red",onClick:a,icon:!0},c.a.createElement(v.a,{name:"delete"})),c.a.createElement(he.a,{floated:"right",size:"tiny",color:"olive",onClick:n,icon:!0},c.a.createElement(v.a,{name:"edit"}))))))}))},Ue=function(){var e=Object(r.useState)(!1),t=Object(o.a)(e,2),a=t[0],n=t[1],l=Object(r.useState)(null),i=Object(o.a)(l,2),s=i[0],u=i[1],m=Object(r.useState)(!1),d=Object(o.a)(m,2),E=d[0],y=d[1],h=se(),g=Object(o.a)(h,2),w=g[0],O=w.activeList,C=w.isDesktop,j=g[1],x=Object(r.useRef)(null),S=function(){x&&x.current&&x.current.focus()};Object(r.useEffect)((function(){S()}),[O]);var k=function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O)try{J(O,t,j)}catch(a){console.error(a)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(f.a)(p.a.mark((function e(t){var a,n,r,c,l,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.destination,n=t.source,r=t.draggableId,a){e.next=3;break}return e.abrupt("return");case 3:if(a.droppableId!==n.droppableId||a.index!==n.index){e.next=5;break}return e.abrupt("return");case 5:if((c=null===O||void 0===O?void 0:O.items)&&O){l=Object(b.a)(c),(i=l.find((function(e){return e.id===r})))&&(l.splice(n.index,1),l.splice(a.index,0,i),O.items=l);try{H(O,l,j)}catch(o){console.error(o)}}case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return O?O.items?c.a.createElement(pe.a,{className:C?"cont-style":"cont-style-mobile"},c.a.createElement(be.a,{as:"h3",style:{paddingRight:"1rem",marginBottom:0}},O.name),c.a.createElement(ye.a,null),0===O.items.length?"List has no items":c.a.createElement(Ve.a,{onDragEnd:I},c.a.createElement(Ve.c,{droppableId:O.id},(function(e){return c.a.createElement("div",Object.assign({ref:e.innerRef},e.droppableProps),O.items.map((function(e,t){return c.a.createElement(ze,{index:t,key:e.id,item:e,onRemove:function(){return k(e)},onEdit:function(){return u(e)}})})),e.placeholder)}))),c.a.createElement(_e,{open:a,onClose:function(){return n(!1)},list:O}),c.a.createElement(De,{open:E,onClose:function(){y(!1),S()},list:O}),c.a.createElement(Re,{open:!!s,onClose:function(){return u(null)},list:O,item:s}),c.a.createElement(ye.a,null),c.a.createElement(he.a,{style:{marginBottom:"1rem"},floated:"left",color:"olive",onClick:function(){return n(!0)}},c.a.createElement(v.a,{name:"edit"}),"Edit"),c.a.createElement(he.a,{style:{marginBottom:"1rem"},color:"green",floated:"right",onClick:function(){return y(!0)},ref:x},c.a.createElement(v.a,{name:"add"}),"Add Item")):null:c.a.createElement(pe.a,{style:{padding:"0 4.6rem"}},c.a.createElement(be.a,{as:"h2",style:{marginTop:"4rem",textAlign:"center"}},"Create or select a list at the top to start using the app."))},Fe=function(e){var t=e.onSubmit,a=e.onCancel,n=se(),r=Object(o.a)(n,1)[0].lists;return c.a.createElement(je.d,{initialValues:{name:""},onSubmit:t,validate:function(e){var t={};return e.name||(t.name="Field is required"),r.map((function(e){return e.name})).includes(e.name)&&(t.name="List with that name already exists"),t}},(function(e){var t=e.isValid,n=e.dirty;return c.a.createElement(je.c,{className:"form ui"},c.a.createElement(je.b,{label:"Name of the list",placeholder:"Name",name:"name",component:Se,autoFocus:!0}),c.a.createElement(Oe.a,null,c.a.createElement(Oe.a.Column,{floated:"left",width:5},c.a.createElement(he.a,{type:"button",onClick:a,color:"red"},"Cancel")),c.a.createElement(Oe.a.Column,{floated:"right",width:5},c.a.createElement(he.a,{type:"submit",floated:"right",color:"green",disabled:!n||!t},"Add"))))}))},Pe=function(){var e=se(),t=Object(o.a)(e,2),a=t[0],n=a.listModalOpen,r=a.user,l=t[1],i=function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l({type:"CLOSE_LIST_MODAL"});try{r&&B(t.name,r,l)}catch(a){console.error(a)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement(we.a,{open:n,onClose:function(){return l({type:"CLOSE_LIST_MODAL"})},centered:!1,size:"tiny",closeIcon:!0},c.a.createElement(we.a.Header,null,"Add a new list"),c.a.createElement(we.a.Content,null,c.a.createElement(Fe,{onSubmit:i,onCancel:function(){return l({type:"CLOSE_LIST_MODAL"})}})))},Be=a(470),He=function(e){var t=e.onSubmit,a=e.onCancel,n=e.label,r=e.placeHolder,l=e.validate,i=e.initialValue,o=e.type;return c.a.createElement(je.d,{initialValues:{name:i},onSubmit:t,validate:l,validateOnChange:!0},(function(e){var t=e.isValid,l=e.dirty;return c.a.createElement(je.c,{className:"form ui"},c.a.createElement(je.b,{label:n,placeholder:r,name:"name",type:o,component:"password"===o?ke:Se,autoFocus:!0}),c.a.createElement(Oe.a,null,c.a.createElement(Oe.a.Column,{floated:"left",width:5},c.a.createElement(he.a,{type:"button",onClick:a,color:"red"},"Cancel")),c.a.createElement(Oe.a.Column,{floated:"right",width:5},c.a.createElement(he.a,{type:"submit",floated:"right",color:"green",disabled:!l||!t},"Ok"))))}))},Ge=function(e){var t=e.open,a=e.onSubmit,n=e.onClose,r=e.label,l=e.header,i=e.placeHolder,o=e.validate,s=e.initialValue,u=e.type;return c.a.createElement(we.a,{open:t,onClose:n,centered:!1,size:"tiny",closeIcon:!0},c.a.createElement(we.a.Header,null,l),c.a.createElement(we.a.Content,null,c.a.createElement(He,{onSubmit:a,onCancel:n,label:r,type:u,placeHolder:i,validate:o,initialValue:s})))},We=function(e){var t=e.user,a=se(),n=Object(o.a)(a,2),l=n[0].isDesktop,i=n[1],s=Object(r.useState)(!1),u=Object(o.a)(s,2),m=u[0],d=u[1],E=function(){var e=Object(f.a)(p.a.mark((function e(a,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=12;break}return e.prev=1,e.next=4,V.changeName(t.id,a.name);case 4:r=e.sent,ne(r,i),d(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n.setErrors({name:"Username already taken."});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,a){return e.apply(this,arguments)}}();return t?l?c.a.createElement(Be.a.Row,null,c.a.createElement(Be.a.Cell,{width:2},"Username"),c.a.createElement(Be.a.Cell,null,t.name),c.a.createElement(Be.a.Cell,{textAlign:"right"},c.a.createElement(he.a,{color:"olive",size:"mini",onClick:function(){return d(!0)}},c.a.createElement(v.a,{name:"edit"}),"Edit")),c.a.createElement(Ge,{open:m,onSubmit:E,onClose:function(){return d(!1)},label:"Enter new name",header:"Change username",placeHolder:"Name",type:"name",validate:void 0,initialValue:t.name})):c.a.createElement(Be.a.Row,{style:{paddingTop:0}},c.a.createElement(Be.a.Cell,null,"Username"),c.a.createElement(Be.a.Cell,{style:{paddingTop:0,paddingBottom:0}},c.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",textAlign:"justify",textJustify:"inter-word",marginTop:"1rem"}},c.a.createElement("p",{style:{lineHeight:"2rem",marginBottom:0}}," ",t.name),c.a.createElement(he.a,{style:{justifySelf:"end"},color:"olive",size:"mini",onClick:function(){return d(!0)}},c.a.createElement(v.a,{name:"edit"}),"Edit"))),c.a.createElement(Ge,{open:m,onSubmit:E,onClose:function(){return d(!1)},label:"Enter new name",header:"Change username",placeHolder:"Name",type:"name",validate:void 0,initialValue:t.name})):null},Je=function(e){var t=e.user,a=se(),n=Object(o.a)(a,2),l=n[0].isDesktop,i=n[1],s=Object(r.useState)(!1),u=Object(o.a)(s,2),m=u[0],d=u[1],E=function(){var e=Object(f.a)(p.a.mark((function e(a,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=12;break}return e.prev=1,e.next=4,V.changeEmail(t.id,a.name);case 4:r=e.sent,re(r,i),d(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n.setErrors({name:"Email adress already in use."});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,a){return e.apply(this,arguments)}}(),b=function(e){var t={};return e.name&&!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.name)&&(t.name="Invalid email address"),t};return t?l?c.a.createElement(Be.a.Row,null,c.a.createElement(Be.a.Cell,{width:2},"Email"),c.a.createElement(Be.a.Cell,null,t.email?t.email:""),c.a.createElement(Be.a.Cell,{textAlign:"right"},c.a.createElement(he.a,{color:"olive",size:"mini",onClick:function(){return d(!0)}},c.a.createElement(v.a,{name:"edit"}),"Edit")),c.a.createElement(Ge,{open:m,onSubmit:E,onClose:function(){return d(!1)},label:"Email adress",type:"email",header:"Change email",placeHolder:"Email",validate:b,initialValue:t.email?t.email:""})):c.a.createElement(Be.a.Row,{style:{paddingTop:0}},c.a.createElement(Be.a.Cell,{width:1},"Email"),c.a.createElement(Be.a.Cell,{style:{paddingTop:0,paddingBottom:0}},c.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",textAlign:"justify",textJustify:"inter-word",marginTop:"1rem"}},c.a.createElement("p",{style:{lineHeight:"2rem",marginBottom:0}},t.email?t.email:""),c.a.createElement(he.a,{style:{justifySelf:"end"},color:"olive",size:"mini",onClick:function(){return d(!0)}},c.a.createElement(v.a,{name:"edit"}),"Edit"))),c.a.createElement(Ge,{open:m,onSubmit:E,onClose:function(){return d(!1)},label:"Email adress",type:"email",header:"Change email",placeHolder:"Email",validate:b,initialValue:t.email?t.email:""})):null},qe=function(e){var t=e.onSubmit,a=e.onCancel,n=e.showPassword,r=e.toggleShowPassword,l=e.validate;return c.a.createElement(je.d,{initialValues:{oldPassword:"",newPassword:""},onSubmit:t},(function(e){var t=e.isValid,i=e.dirty;return c.a.createElement(je.c,{className:"form ui"},c.a.createElement(je.b,{label:"Current password",placeholder:"Current password",name:"oldPassword",component:ke,autoFocus:!0}),c.a.createElement(je.b,{label:"New password",placeholder:"Password",name:"newPassword",component:n?Se:ke,autoFocus:!1,validate:l,validateOnChange:!0,validateOnBlur:!0}),c.a.createElement(je.b,{name:"Show password",type:"checkbox",checked:n,component:Ie,onChange:r}),c.a.createElement(Oe.a,{style:{paddingTop:"1rem"}},c.a.createElement(Oe.a.Column,{floated:"left",width:5},c.a.createElement(he.a,{type:"button",onClick:a,color:"red"},"Cancel")),c.a.createElement(Oe.a.Column,{floated:"right",width:5},c.a.createElement(he.a,{type:"submit",floated:"right",color:"green",disabled:!i||!t},"Ok"))))}))},Ze=function(e){var t=e.open,a=e.onSubmit,n=e.onClose,l=e.header,i=e.validate,s=Object(r.useState)(!1),u=Object(o.a)(s,2),m=u[0],d=u[1];return c.a.createElement(we.a,{open:t,onClose:n,centered:!1,size:"tiny",closeIcon:!0},c.a.createElement(we.a.Header,null,l),c.a.createElement(we.a.Content,null,c.a.createElement(qe,{onSubmit:a,onCancel:function(){n(),d(!1)},showPassword:m,toggleShowPassword:function(){d(!m)},validate:i})))},Ye=function(e){var t=e.user,a=se(),n=Object(o.a)(a,2),l=n[0].isDesktop,i=(n[1],Object(r.useState)(!1)),s=Object(o.a)(i,2),u=s[0],m=s[1],d=function(){var e=Object(f.a)(p.a.mark((function e(a,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=10;break}return e.prev=1,e.next=4,V.changePassword(t.id,a.oldPassword,a.newPassword);case 4:m(!1),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),n.setErrors({newPassword:"Password is too short. Please use at least 5 characters."});case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,a){return e.apply(this,arguments)}}(),E=function(e){if(console.log(e),e.length<5)return"Password is too short. Please use at least 5 characters."};return t?l?c.a.createElement(Be.a.Row,null,c.a.createElement(Be.a.Cell,{width:2},"Password"),c.a.createElement(Be.a.Cell,null,"********"),c.a.createElement(Be.a.Cell,{textAlign:"right"},c.a.createElement(he.a,{color:"olive",size:"mini",onClick:function(){return m(!0)}},c.a.createElement(v.a,{name:"edit"}),"Edit")),c.a.createElement(Ze,{open:u,onSubmit:d,onClose:function(){return m(!1)},header:"Change password",validate:E,initialValue:""})):c.a.createElement(Be.a.Row,{style:{paddingTop:0}},c.a.createElement(Be.a.Cell,null,"Password"),c.a.createElement(Be.a.Cell,{style:{paddingTop:0,paddingBottom:0}},c.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",textAlign:"justify",textJustify:"inter-word",marginTop:"1rem"}},c.a.createElement("p",{style:{lineHeight:"2rem",marginBottom:0}}," ","********"),c.a.createElement(he.a,{style:{justifySelf:"end"},color:"olive",size:"mini",onClick:function(){return m(!0)}},c.a.createElement(v.a,{name:"edit"}),"Edit"))),c.a.createElement(Ze,{open:u,onSubmit:d,onClose:function(){return m(!1)},header:"Change password",validate:E,initialValue:""})):null},$e=function(e){var t=e.user,a=se(),n=Object(o.a)(a,2),l=n[0].isDesktop,i=n[1],s=Object(r.useState)(),m=Object(o.a)(s,2),d=m[0],E=m[1],b=Object(u.f)();Object(r.useEffect)((function(){E(t.listInvitations)}),[t]);var y=function(){var e=Object(f.a)(p.a.mark((function e(a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=4;break}return e.next=3,X(a,t,i);case 3:b.push("/list");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(e){t&&ee(e,t,i)};if(!t||!d)return null;var g={padding:"1rem 0 1rem 0"};return l?c.a.createElement(r.Fragment,null,c.a.createElement(ye.a,{style:g,horizontal:!0},c.a.createElement(be.a,{as:"h4"},"List Invitations")),d&&0===d.length?c.a.createElement("p",{style:{paddingBottom:"1.3rem"}},"No new invitations."):c.a.createElement(Be.a,null,c.a.createElement(Be.a.Body,null,d&&d.map((function(e){return c.a.createElement(Be.a.Row,{key:e.id},c.a.createElement(Be.a.Cell,null,e.name," by ",e.user.name),c.a.createElement(Be.a.Cell,{textAlign:"right"},c.a.createElement(he.a,{positive:!0,size:"mini",onClick:function(){return y(e)}},c.a.createElement(v.a,{name:"check"}),"Accept"),c.a.createElement(he.a,{negative:!0,size:"mini",onClick:function(){return h(e)}},c.a.createElement(v.a,{name:"delete"}),"Decline")))}))))):c.a.createElement(r.Fragment,null,c.a.createElement(ye.a,{style:g,horizontal:!0},c.a.createElement(be.a,{as:"h4"},"List Invitations")),d&&0===d.length?c.a.createElement("p",{style:{paddingBottom:"1.3rem"}},"No new invitations."):c.a.createElement(Be.a,null,c.a.createElement(Be.a.Body,null,d&&d.map((function(e){return c.a.createElement(Be.a.Row,{key:e.id},c.a.createElement(Be.a.Cell,null,c.a.createElement("p",null,e.name," by ",e.user.name),c.a.createElement(he.a,{positive:!0,size:"mini",onClick:function(){return y(e)}},c.a.createElement(v.a,{name:"check"}),"Accept"),c.a.createElement(he.a,{negative:!0,size:"mini",onClick:function(){return h(e)},floated:"right"},c.a.createElement(v.a,{name:"delete"}),"Decline")))})))))},Ke=function(){var e=se(),t=Object(o.a)(e,2),a=t[0],n=a.user,l=a.isDesktop,i=t[1],s=Object(r.useState)(),u=Object(o.a)(s,2),m=u[0],d=u[1];return Object(r.useEffect)((function(){i({type:"CLEAR_ACTIVE_LIST"})}),[i,null===n||void 0===n?void 0:n.listInvitations]),Object(r.useEffect)((function(){(function(){var e=Object(f.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=5;break}return e.next=3,V.getUser(n.id);case 3:t=e.sent,d(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[n]),n&&m?c.a.createElement(pe.a,{className:l?"cont-style":"cont-style-mobile"},c.a.createElement(ye.a,{style:{padding:"1rem 0 1rem 0"},horizontal:!0},c.a.createElement(be.a,{as:"h4"},"Account information")),c.a.createElement(Be.a,{definition:!0},c.a.createElement(Be.a.Body,null,c.a.createElement(We,{user:m}),c.a.createElement(Je,{user:m}),c.a.createElement(Ye,{user:m}))),c.a.createElement($e,{user:m})):null},Qe=a(471),Xe=a(260),et=function(e){var t=e.className,a=void 0===t?"":t,n=Object(Xe.a)(e,["className"]);return c.a.createElement(he.a,Object.assign({basic:!0,color:"blue",className:["link",a].join(" "),type:"button"},n))},tt=function(e){var t=e.onSubmit,a=e.onCancel,r=e.loginFailed,l=se(),i=Object(o.a)(l,2)[1];return c.a.createElement(je.d,{initialValues:{name:"",password:""},onSubmit:t,validateOnChange:!1,validateOnBlur:!1,validate:function(e){var t={};return e.name||(t.name="Field is required"),e.password||(t.password="Field is required"),t}},(function(e){var t=e.isValid,l=e.dirty;return c.a.createElement(je.c,{className:"form ui"},c.a.createElement(je.b,{label:"Username or email",placeholder:"Username / email",name:"name",component:Se,autoFocus:!0}),c.a.createElement(je.b,{label:"Password",placeholder:"Password",name:"password",component:ke}),r&&c.a.createElement(Qe.a,{negative:!0},c.a.createElement("p",null,"Invalid username or password.")),c.a.createElement("div",{style:{marginBottom:"1rem"}},c.a.createElement(et,{onClick:function(){return i(ce(n.RecoveryModal))}},"Forgot password?")),c.a.createElement(Oe.a,null,c.a.createElement(Oe.a.Column,{floated:"left",width:5},c.a.createElement(he.a,{type:"button",onClick:a,color:"red"},"Cancel")),c.a.createElement(Oe.a.Column,{floated:"right",width:5},c.a.createElement(he.a,{type:"submit",floated:"right",color:"green",disabled:!l||!t},"Login"))))}))},at=function(e){var t=e.open,a=se(),l=Object(o.a)(a,2)[1],i=Object(r.useState)(!1),s=Object(o.a)(i,2),m=s[0],d=s[1],E=Object(u.f)(),v=function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z(t.name,t.password,l);case 3:E.push("/list"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),d(!0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement(we.a,{open:t,onClose:function(){return l(ce(n.None))},centered:!1,size:"tiny",closeIcon:!0},c.a.createElement(we.a.Header,null,"Login"),c.a.createElement(we.a.Content,null,c.a.createElement(tt,{onSubmit:v,onCancel:function(){return l(ce(n.None))},loginFailed:m})))},nt=function(e){var t=e.onSubmit,a=e.onCancel,r=e.registerFailed,l=se(),i=Object(o.a)(l,2)[1];return c.a.createElement(je.d,{initialValues:{name:"",email:"",password:""},onSubmit:t,validateOnChange:!1,validateOnBlur:!1,validate:function(e){var t={};return e.name||(t.name="Field is required"),e.email&&!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)&&(t.email="Invalid email address"),e.password||(t.password="Field is required"),t}},(function(e){var t=e.isValid,l=e.dirty;return c.a.createElement(je.c,{className:"form ui"},c.a.createElement(je.b,{label:"Username",placeholder:"Username",name:"name",component:Se,autoFocus:!0}),c.a.createElement(je.b,{label:"Password",placeholder:"Password",name:"password",component:ke}),c.a.createElement(je.b,{label:"Email",placeholder:"Optional email adress. Can be added later in account settings",name:"email",component:Se}),r&&c.a.createElement(Qe.a,{negative:!0},c.a.createElement("p",null,r)),c.a.createElement("div",{style:{marginBottom:"1rem"}},c.a.createElement(et,{onClick:function(){return i(ce(n.LoginModal))}},"Already have an account? Click here to login.")),c.a.createElement(Oe.a,null,c.a.createElement(Oe.a.Column,{floated:"left",width:5},c.a.createElement(he.a,{type:"button",onClick:a,color:"red"},"Cancel")),c.a.createElement(Oe.a.Column,{floated:"right",width:5},c.a.createElement(he.a,{type:"submit",floated:"right",color:"green",disabled:!l||!t},"Confirm"))))}))},rt=function(e){var t=e.open,a=se(),l=Object(o.a)(a,2)[1],i=Object(r.useState)(""),s=Object(o.a)(i,2),m=s[0],d=s[1],E=Object(u.f)(),v=function(){d(""),l(ce(n.None))},b=function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y(t.name,t.email,t.password,l);case 3:E.push("/list"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),d(e.t0.response.data);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement(we.a,{open:t,onClose:v,centered:!1,size:"tiny",closeIcon:!0},c.a.createElement(we.a.Header,null,"Register"),c.a.createElement(we.a.Content,null,c.a.createElement(nt,{onSubmit:b,onCancel:v,registerFailed:m})))},ct=function(e){var t=e.onSubmit,a=e.onCancel,n=e.onOpenLoginModal,r=e.emailFound,l=e.emailNotFound,i=e.resetMessage;return c.a.createElement(je.d,{initialValues:{email:""},onSubmit:t,validateOnChange:!0,validateOnBlur:!1,validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Field is required",i(),t}},(function(e){var t=e.isValid,i=e.dirty;return c.a.createElement(je.c,{className:"form ui"},c.a.createElement(je.b,{label:"Email",placeholder:"Email",name:"email",component:Se,autoFocus:!0}),r&&c.a.createElement(Qe.a,{info:!0},c.a.createElement("p",{style:{textAlign:"center"}},"Password reset email successfully sent."),c.a.createElement("div",{className:"center-container"},c.a.createElement(et,{onClick:n},"Click here to login."))),l&&c.a.createElement(Qe.a,{negative:!0},c.a.createElement("p",null,"Email is not in use.")),c.a.createElement("div",{style:{marginBottom:"1rem"}}),c.a.createElement(Oe.a,null,c.a.createElement(Oe.a.Column,{floated:"left",width:5},c.a.createElement(he.a,{type:"button",onClick:a,color:"red"},"Cancel")),c.a.createElement(Oe.a.Column,{floated:"right",width:5},c.a.createElement(he.a,{type:"submit",floated:"right",color:"green",disabled:!i||!t},"Login"))))}))},lt=function(e){var t=e.open,a=se(),l=Object(o.a)(a,2)[1],i=Object(r.useState)(!1),s=Object(o.a)(i,2),u=s[0],m=s[1],d=Object(r.useState)(!1),E=Object(o.a)(d,2),v=E[0],b=E[1],y=function(){b(!1),l(ce(n.None))},h=function(){var e=Object(f.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V.getUserByEmail(t.email);case 3:a=e.sent,console.log(a),a?(b(!1),m(!0)):(m(!1),b(!0)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),b(!0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement(we.a,{open:t,onClose:y,centered:!1,size:"tiny",closeIcon:!0},c.a.createElement(we.a.Header,null,"Request a password reset"),c.a.createElement(we.a.Content,null,c.a.createElement(ct,{onSubmit:h,onCancel:y,onOpenLoginModal:function(){y(),l(ce(n.LoginModal))},emailFound:u,emailNotFound:v,resetMessage:function(){m(!1),b(!1)}})))},it=function(){var e=se(),t=Object(o.a)(e,2),a=t[0],r=a.user,l=a.isDesktop,i=a.modalType,s=t[1],u={padding:"0 4.6rem"},m={marginTop:"4rem",textAlign:"center"};return r?c.a.createElement(pe.a,{style:u},c.a.createElement(be.a,{as:"h2",style:m},"Create or select a list.")):c.a.createElement(pe.a,{style:u},c.a.createElement(be.a,{as:"h2",style:m},"Please login or register to use the site."),c.a.createElement(ge.a,{basic:!0,textAlign:"center"},c.a.createElement(he.a,{style:l?{marginRight:"1rem"}:{marginBottom:"1rem"},secondary:!0,content:"Login",onClick:function(){return s(ce(n.LoginModal))}}),c.a.createElement(he.a,{style:l?{marginLeft:"1rem"}:null,secondary:!0,content:"Register",onClick:function(){return s(ce(n.RegisterModal))}})),c.a.createElement(at,{open:i===n.LoginModal}),c.a.createElement(rt,{open:i===n.RegisterModal}),c.a.createElement(lt,{open:i===n.RecoveryModal}))},ot=function(){var e=se(),t=Object(o.a)(e,2)[1],a=Object(m.useMediaQuery)({minDeviceWidth:900},void 0,(function(e){t(z(e))}));return Object(r.useEffect)((function(){t(z(a))}),[t,a]),c.a.createElement(s.a,null,c.a.createElement("div",null,c.a.createElement(ve,null),c.a.createElement(pe.a,null,c.a.createElement(u.c,null,c.a.createElement(u.a,{path:"/profile"},c.a.createElement(Ke,null)),c.a.createElement(u.a,{path:"/list"},c.a.createElement(Ue,null)),c.a.createElement(u.a,{path:"/"},c.a.createElement(it,null))),c.a.createElement(Pe,null))))};a(455);i.a.render(c.a.createElement(oe,{reducer:function(e,t){switch(t.type){case"SET_DEVICE_TO_DESKTOP":return Object(y.a)(Object(y.a)({},e),{},{isDesktop:t.payload});case"SET_LISTS":return Object(y.a)(Object(y.a)({},e),{},{lists:t.payload});case"SET_ACTIVE_LIST":return Object(y.a)(Object(y.a)({},e),{},{activeList:t.payload});case"CLEAR_ACTIVE_LIST":return Object(y.a)(Object(y.a)({},e),{},{activeList:null});case"OPEN_LIST_MODAL":return Object(y.a)(Object(y.a)({},e),{},{listModalOpen:!0});case"CLOSE_LIST_MODAL":return Object(y.a)(Object(y.a)({},e),{},{listModalOpen:!1});case"ADD_LIST":return Object(y.a)(Object(y.a)({},e),{},{lists:[].concat(Object(b.a)(e.lists),[t.payload])});case"EDIT_LIST":return Object(y.a)(Object(y.a)({},e),{},{activeList:t.payload});case"DELETE_LIST":return Object(y.a)(Object(y.a)({},e),{},{lists:e.lists.filter((function(e){return e.id!==t.payload.id})),activeList:null});case"ADD_ITEM":return t.payload.list.items.push(t.payload.item),Object(y.a)(Object(y.a)({},e),{},{lists:e.lists.map((function(e){return e.id===t.payload.list.id?t.payload.list:e}))});case"DELETE_ITEM":return t.payload.list.items=t.payload.list.items.filter((function(e){return e.id!==t.payload.item.id})),Object(y.a)(Object(y.a)({},e),{},{lists:e.lists.map((function(e){return e.id===t.payload.list.id?t.payload.list:e}))});case"EDIT_ITEM":return t.payload.list.items=t.payload.list.items.map((function(e){return e.id===t.payload.editedItem.id?t.payload.editedItem:e})),Object(y.a)(Object(y.a)({},e),{},{lists:e.lists.map((function(e){return e.id===t.payload.list.id?t.payload.list:e}))});case"SET_USER":return window.localStorage.setItem("loggedShoppingListAppUser",JSON.stringify(t.payload.user)),R.setToken(t.payload.user.token),Object(y.a)(Object(y.a)({},e),{},{user:t.payload.user});case"DISCARD_USER":return Object(y.a)(Object(y.a)({},e),{},{user:null});case"INVITE_GUEST":case"UNINVITE_GUEST":return Object(y.a)(Object(y.a)({},e),{},{lists:e.lists.map((function(e){return e.id===t.payload.list.id?t.payload.list:e}))});case"ACCEPT_INVITATION":return Object(y.a)(Object(y.a)({},e),{},{lists:e.lists.map((function(e){return e.id===t.payload.list.id?t.payload.list:e})),user:Object(y.a)(Object(y.a)({},e.user),{},{listInvitations:t.payload.user.listInvitations})});case"DECLINE_INVITATION":return Object(y.a)(Object(y.a)({},e),{},{user:Object(y.a)(Object(y.a)({},e.user),{},{listInvitations:t.payload.user.listInvitations})});case"LEAVE_LIST":return Object(y.a)(Object(y.a)({},e),{},{lists:e.lists.map((function(e){return e.id===t.payload.list.id?t.payload.list:e}))});case"REMOVE_GUEST":return Object(y.a)(Object(y.a)({},e),{},{lists:e.lists.map((function(e){return e.id===t.payload.list.id?t.payload.list:e})),activeList:t.payload.list});case"CHANGE_USER_NAME":case"CHANGE_USER_EMAIL":return Object(y.a)(Object(y.a)({},e),{},{user:t.payload.user});case"SET_OPEN_MODAL_TYPE":return Object(y.a)(Object(y.a)({},e),{},{modalType:t.payload.modal});default:return e}}},c.a.createElement(ot,null)),document.getElementById("root"))}},[[271,1,2]]]);
//# sourceMappingURL=main.c9720e09.chunk.js.map